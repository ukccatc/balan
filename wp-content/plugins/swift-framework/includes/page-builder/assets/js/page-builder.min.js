"use strict";var deletedElement,draggedItem,percentageClass,sfTranslatedText=jQuery(".spb_translated_objects"),elements_values_array=[],currentAsset="";function spb_reorder_saved_templates(){var e=jQuery(".spb-prebuilt-pages"),t=e.children("li").get();t.sort(function(e,t){var a=jQuery(e).text().toUpperCase(),s=jQuery(t).text().toUpperCase();return a<s?-1:a>s?1:0}),jQuery.each(t,function(t,a){e.append(a)})}function trackMostusedElements(e){var t={action:"spb_track_used_elements",data_element_type:e};jQuery.post(ajaxurl,t,function(e){})}function savePbHistory(e,t,a){var s=jQuery("#post").find("#post_ID").val(),l={action:"spb_save_pb_history",data_element:t,data_element_type:e,data_pb_content:spb_getContentFromTinyMCE(),data_type:a,data_page_id:s};jQuery.post(ajaxurl,l,function(e){jQuery("#dropdown-history").html(e)})}function cleaningAfterClosingElementsModal(){jQuery(".spb-elements-no-results").hide(),jQuery("#spb-option-slideout").fadeOut(300),jQuery("#spb_edit_form").fadeOut(),jQuery("#spb_edit_form").css({opacity:.8}).hide(),jQuery(".spb_elements_tabs_header").find(".active_tab").removeClass("active_tab"),jQuery("body").css("overflow",""),jQuery(".spb-content-elements").removeClass("selected"),jQuery(".spb-item-slideout").removeClass("selected"),jQuery(".spb-content-elements > li").find("a").parent().removeClass("hide-modal_elements"),jQuery("#sf_search_elements").val("")}function open_elements_dropdown(){jQuery(".spb_content_elements:first").trigger("click")}function close_elements_dropdown(){jQuery(".spb_content_elements").parents(".content-dropdown").removeClass("open"),jQuery(".spb_content_elements").removeClass("selected")}function spb_templateSystem(){jQuery(document).on("click","#spb_save_template",function(e){e.preventDefault();var t='<div class="modal_wrapper"><a class="waves-effect waves-light btn modal-trigger" href="#modal-save-template"></a><div id="modal-save-template" class="modal modal_spb"><div class="modal-content">';t+="<h4>"+sfTranslatedText.attr("data-spb-save-template-header")+'</h4><div class="row"> <div class="input-field col s12"><input id="saved_template_name"  type="text" class="validate"><label for="saved_template_name">'+sfTranslatedText.attr("data-spb-save-template-msg")+"</label>",t+='</div></div><div class="modal-footer modal-save-template"><a href="#!" class=" modal-action spb-modal-close waves-effect modal-ok-button btn-flat">OK</a><a href="#!" class=" modal-action spb-modal-close waves-effect modal-cancel-button btn-flat">Cancel</a></div></div></div></div>',jQuery("#spb").append(t),jQuery("#modal-save-template").openModal();var a=generateShortcodesFromHtml(jQuery(this).closest(".spb_sortable"),!0);removeClassProcessedElements(),jQuery("#modal-save-template").attr("data-element",a)}),jQuery(document).on("mouseenter",".sf_prebuilt_template",function(){jQuery(this).find("a").next().show()}),jQuery(document).on("mouseleave",".sf_prebuilt_template",function(){jQuery(this).find("a").next().hide()}),jQuery(document).on("click",".sf_prebuilt_template a",function(e){e.preventDefault();var t={action:"sf_load_template",template_id:jQuery(this).attr("data-template_id")};jQuery.post(ajaxurl,t,function(e){jQuery(".spb_main_sortable").append(e).find(".spb_init_callback").each(function(){var e=window[jQuery(this).attr("value")];"function"==typeof e&&e(jQuery(this).closest(".spb_content_element"))}),initDroppable(),save_spb_html()}),cleaningAfterClosingElementsModal()}),jQuery(document).on("click",".spb_template_li a",function(e){e.preventDefault();var t={action:"spb_load_template",template_id:jQuery(this).attr("data-template_id")};jQuery.post(ajaxurl,t,function(e){jQuery(".spb_main_sortable").append(e).find(".spb_init_callback").each(function(){var e=window[jQuery(this).attr("value")];"function"==typeof e&&e(jQuery(this).closest(".spb_content_element"))}),initDroppable(),save_spb_html()}),jQuery(this).parents(".custom-templates-nav").find(".dropdown").removeClass("open")}),jQuery(document).on("click",".spb_remove_template",function(e){e.preventDefault();var t='<div class="modal_wrapper"><a class="waves-effect waves-light btn modal-trigger" href="#modal-delete-saved-element"></a><div id="modal-delete-saved-element" class="modal modal_spb"><div class="modal-content">';t+="<h4>"+sfTranslatedText.attr("data-spb-delete-page-template-header")+'</h4><div class="row"> <div class="input-field delete-block col s12"><label>'+sfTranslatedText.attr("data-spb-delete-saved-template-msg1")+"</label>",t+='</div></div><div class="modal-footer modal-remove-template"><a href="#!" class=" modal-action spb-modal-close waves-effect modal-ok-button btn-flat">OK</a><a href="#!" class=" modal-action spb-modal-close waves-effect modal-cancel-button btn-flat">Cancel</a></div></div></div></div>',jQuery("#spb").append(t),jQuery("#modal-delete-saved-element").openModal(),deletedElement=jQuery(this).closest(".spb_template_li").find("a").attr("data-template_id")})}function spb_customElementSystem(){jQuery(document).on("click",".modal-cancel-button",function(e){e.preventDefault(),jQuery(".modal_wrapper").remove()}),jQuery(document).on("click",".modal-save-template .modal-ok-button",function(){var e=jQuery(".modal-content #saved_template_name").val(),t=generateShortcodesFromHtml(jQuery(".spb_main_sortable"));if(null!==e&&""!==e){var a={action:"spb_save_template",template:t,template_name:e};jQuery.post(ajaxurl,a,function(e){jQuery(".spb-prebuilt-pages").html(e),spb_reorder_saved_templates(),jQuery(".spb-prebuilt-pages .spb_template_li").show()})}Materialize.toast(sfTranslatedText.attr("data-spb-saved-template"),2e3),jQuery(".modal_wrapper").remove()}),jQuery(document).on("click",".modal-delete-element .modal-ok-button",function(){var e,t=deletedElement.closest(".spb_sortable");t.parents(".spb_gmaps").length>0&&deletedElement.closest(".spb_sortable").parent().remove(),deletedElement.closest(".spb_sortable").remove(),t.addClass("empty_column"),save_spb_html(),e=(deletedElement=deletedElement.parent().parent().parent()).find(".el_name_holder").attr("data_default_name"),(deletedElement.hasClass("spb_row")||deletedElement.hasClass("spb_column"))&&(e=deletedElement.find(".asset-name").text()),savePbHistory(deletedElement.attr("data-element_type"),e,"Deleted"),Materialize.toast(sfTranslatedText.attr("data-spb-deleted-element"),2e3),jQuery(".modal_wrapper").remove(),deletedElement=null}),jQuery(document).on("click",".modal-delete-page-builder-content .modal-ok-button",function(){!0!==isTinyMceActive()?jQuery("#content").val(""):tinyMCE.activeEditor.setContent(""),jQuery("#spb_content").find(".spb_sortable").remove(),jQuery("#spb_content").find(".new_sortable_element").remove(),jQuery("#spb_content").find(".newtop_sortable_element").remove(),save_spb_html(),jQuery(".modal-delete-page-builder-content").remove(),Materialize.toast(sfTranslatedText.attr("data-spb-deleted-pb-content"),2e3),jQuery(".modal_wrapper").remove()}),jQuery(document).on("click",".modal-delete-saved-element .modal-ok-button",function(){var e={action:"spb_delete_element",element_id:deletedElement.closest(".spb_elements_li").find("a").attr("data-element_id")};jQuery.post(ajaxurl,e,function(e){jQuery(".spb-content-elements-saved").html(e),setTimeout(Materialize.toast(sfTranslatedText.attr("data-spb-deleted-element"),1500),2e3)})}),jQuery(document).on("click",".modal-save-element .modal-ok-button",function(){var e=jQuery(".modal-content #saved_element_name").val();if(null!==e&&""!==e){var t={action:"spb_save_element",element:jQuery("#modal-save-element").attr("data-element"),element_name:e};jQuery.post(ajaxurl,t,function(e){jQuery(".spb-content-elements-saved").html(e)})}jQuery("#modal-save-element").remove(),Materialize.toast(sfTranslatedText.attr("data-spb-saved-element"),2e3),jQuery(".modal_wrapper").remove()}),jQuery(document).on("click",".modal-save-element .modal-cancel-button",function(e){e.preventDefault(),jQuery(".modal-content #saved_element_name").val(""),jQuery(".modal-content #saved_element_name").focusout()}),jQuery(document).on("click",".element-save",function(e){e.preventDefault();var t='<div class="modal_wrapper"><a class="waves-effect waves-light btn modal-trigger" href="#modal-save-element"></a><div id="modal-save-element" class="modal modal_spb"><div class="modal-content">';t+="<h4>"+sfTranslatedText.attr("data-spb-save-element-header")+'</h4><div class="row"> <div class="input-field col s12"><input id="saved_element_name"  type="text" class="validate"><label for="first_name">'+sfTranslatedText.attr("data-spb-save-element-msg")+"</label>",t+='</div></div><div class="modal-footer modal-save-element"><a href="#!" class=" modal-action spb-modal-close waves-effect modal-ok-button btn-flat">OK</a><a href="#!" class=" modal-action spb-modal-close waves-effect modal-cancel-button btn-flat">Cancel</a></div></div></div></div>',jQuery("#spb").append(t),jQuery("#modal-save-element").openModal();var a=generateShortcodesFromHtml(jQuery(this).closest(".spb_sortable"),!0);removeClassProcessedElements(),jQuery("#modal-save-element").attr("data-element",a)}),jQuery(document).on("click",".spb_elements_li a",function(e){e.preventDefault();var t={action:"spb_load_element",element_id:jQuery(this).attr("data-element_id")};jQuery.post(ajaxurl,t,function(e){""===currentAsset&&(currentAsset=".spb_main_sortable"),jQuery(currentAsset).append(e).find(".spb_init_callback").each(function(){var e=window[jQuery(this).attr("value")];"function"==typeof e&&e(jQuery(this).closest(".spb_content_element"))}),currentAsset="",save_spb_html()}),cleaningAfterClosingElementsModal()}),jQuery(document).on("click",".spb_remove_element",function(e){e.preventDefault();var t='<div class="modal_wrapper"><a class="waves-effect waves-light btn modal-trigger" href="#modal-delete-saved-element">Modal</a><div id="modal-delete-saved-element" class="modal modal_spb"><div class="modal-content">';t+="<h4>"+sfTranslatedText.attr("data-spb-delete-saved-element-header")+'</h4><div class="row"> <div class="input-field delete-block col s12"><label>'+sfTranslatedText.attr("data-spb-delete-saved-element-msg1")+"</label>",t+='</div></div><div class="modal-footer modal-delete-saved-element"><a href="#!" class=" modal-action spb-modal-close waves-effect modal-ok-button btn-flat">OK</a><a href="#!" class=" modal-action spb-modal-close waves-effect modal-cancel-button btn-flat">Cancel</a></div></div></div></div>',jQuery("#spb").append(t),jQuery("#modal-delete-saved-element").openModal(),deletedElement=jQuery(this)})}!function(e){e.log=function(e){void 0!==window.console&&console.log(e)},e.swift_page_builder={isMainContainerEmpty:function(){jQuery(".spb_main_sortable > div").length?e(".metabox-builder-content").removeClass("empty-builder"):e(".metabox-builder-content").addClass("empty-builder")},cloneSelectedImagesFromMediaTab:function(t){var a=e(".spb_current_active_media_button").removeClass(".spb_current_active_media_button").next(),s=a.prev().prev(),l=a.find(".sf_gallery_widget_attached_images_list");l.html(t);var n="";l.find("li").each(function(){n+=(n.length>0?",":"")+e(this).attr("media_id")}),s.val(n),attachedImgSortable(l),tb_remove()},galleryImagesControls:function(){e(document).on("click","#spb .sf_gallery_widget_add_images",function(t){t.preventDefault();var a="",s=e(this).parent().find(".attach_image"),l=e(this).parent().find(".sf_gallery_widget_attached_images_list");a?a.open():((a=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1})).on("select",function(){var e=a.state().get("selection").first().toJSON();return s.val(e.id),l.empty(),l.append('<li class="added" media_id="'+e.id+'"><img src="'+e.sizes.thumbnail.url+'" alt="" rel="'+e.id+'"><div class="sf-close-image-bar"><a title="Deselect" class="sf-close-delete-file" href="#">Ã—</a></div></li>'),jQuery(".sf-close-delete-file").click(function(e){return e.preventDefault(),jQuery(this).parent().parent().remove(),jQuery(".sf_gallery_widget_attached_images_ids").val(""),!1}),!1}),a.open())}),e(".gallery_widget_img_select li").on("click",function(){e(this).toggleClass("added");var t=e(this).parent().parent().prev().prev().prev(),a=t.val().length>0?t.val().split(","):[],s=e(this).find("img").attr("rel"),l=e.inArray(s,a);-1==l?a.push(s):a.splice(l,1),t.val(a.join(","))})},initializeFormEditing:function(t){removeClassProcessedElements(),e("#spb_edit_form .wp-editor-wrap .textarea_html").each(function(){initTinyMce(e(this))});var a=800;if("checked"==jQuery("#spb .custom_css_percentage").attr("checked")&&(a=20),jQuery("#padding_vertical, #padding_vertical_val, #padding_horizontal, #padding_horizontal_val, #margin_vertical, #margin_vertical_val ").attr("max",a),"spb_text_block"==t.attr("data-element_type")){var s=t.find(".padding_vertical"),l=t.find(".padding_horizontal");s.val()>0&&(""==jQuery(".spb_edit_form_elements .custom-padding-top").val()&&jQuery(".spb_edit_form_elements .custom-padding-top").val(s.val()),""==jQuery(".spb_edit_form_elements .custom-padding-bottom").val()&&jQuery(".spb_edit_form_elements .custom-padding-bottom").val(s.val())),l.val()>0&&""==jQuery(".spb_edit_form_elements .custom-padding-left").val()&&(""==jQuery(".spb_edit_form_elements .custom-padding-left").val()&&jQuery(".spb_edit_form_elements .custom-padding-left").val(l.val()),""==jQuery(".spb_edit_form_elements .custom-padding-right").val()&&jQuery(".spb_edit_form_elements .custom-padding-right").val(l.val()))}if("spb_column"==t.attr("data-element_type")){l=t.find(".padding_horizontal").last(),s=t.find(".padding_vertical").last(),a=20;jQuery("#col_el_class").parent().parent().parent().hide(),jQuery(".col_sm").attr("disabled","disabled"),setTimeout(function(){jQuery("#col_padding_val").parent().parent().parent().hide(),parseInt(jQuery("#col_padding_val").val())>0&&(l.val(parseInt(jQuery("#col_padding_val").val())),s.val(parseInt(jQuery("#col_padding_val").val())),jQuery("#col_padding_val").val(0),jQuery("#col_padding").val(0),jQuery("#padding_horizontal").attr("max",a),jQuery("#padding_horizontal_val").attr("max",a),jQuery("#padding_vertical").attr("max",a),jQuery("#padding_vertical_val").attr("max",a),jQuery("#spb_edit_form .custom_css_percentage").attr("checked","checked"),jQuery(".custom-padding-bottom").val(l.val()),jQuery(".custom-padding-top").val(l.val()),jQuery(".custom-padding-left").val(l.val()),jQuery(".custom-padding-right").val(l.val())),jQuery("#col_padding").attr("disabled","disabled"),jQuery("#padding_horizontal_val").attr("value",l.val()),jQuery("#padding_horizontal").attr("value",l.val()),jQuery("#padding_vertical_val").attr("value",s.val()),jQuery("#padding_vertical").attr("value",s.val())},100)}if("spb_row"==t.attr("data-element_type")){jQuery("#row_el_class").parent().parent().parent().hide();l=t.find(".row_padding_horizontal"),s=t.find(".row_padding_vertical");var n,i,r=t.find(".row_margin_vertical"),o=(a=800,t.find(".row_el_class").val());l.val(Math.round(l.val())),s.val(Math.round(s.val())),r.val(Math.round(r.val())),""!=o&&(jQuery("#row_el_class").val(""),jQuery("#el_class").val(o)),jQuery("#row_margin_vertical_val").attr("disabled","disabled"),jQuery("#row_padding_horizontal_val").attr("disabled","disabled"),jQuery("#row_padding_vertical_val").attr("disabled","disabled"),jQuery("#row_margin_vertical").attr("disabled","disabled"),jQuery("#row_padding_horizontal").attr("disabled","disabled"),jQuery("#row_padding_vertical").attr("disabled","disabled"),jQuery("#row_padding_vertical").prev().css("background-color","#ccc"),jQuery("#row_padding_horizontal").prev().css("background-color","#ccc"),jQuery("#row_margin_vertical").prev().css("background-color","#ccc"),l.val()>0&&(""==jQuery(".spb_edit_form_elements .custom-padding-left").val()&&""==jQuery(".spb_edit_form_elements .custom-padding-right").val()&&(n=l.val()/20*100,i=a*n/100,jQuery("#padding_horizontal_val").val(i),jQuery("#padding_horizontal").val(i),l=jQuery("#padding_horizontal_val")),""==jQuery(".spb_edit_form_elements .custom-padding-left").val()&&jQuery(".spb_edit_form_elements .custom-padding-left").val(l.val()),""==jQuery(".spb_edit_form_elements .custom-padding-right").val()&&jQuery(".spb_edit_form_elements .custom-padding-right").val(l.val())),s.val()>0&&(jQuery("#padding_vertical_val").val(s.val()),jQuery("#padding_vertical").val(s.val()),""==jQuery(".spb_edit_form_elements .custom-padding-bottom").val()&&jQuery(".spb_edit_form_elements .custom-padding-bottom").val(s.val()),""==jQuery(".spb_edit_form_elements .custom-padding-top").val()&&jQuery(".spb_edit_form_elements .custom-padding-top").val(s.val())),r.val()>0&&(jQuery("#margin_vertical_val").val(r.val()),jQuery("#margin_vertical").val(r.val()),""==jQuery(".spb_edit_form_elements .custom-margin-bottom").val()&&jQuery(".spb_edit_form_elements .custom-margin-bottom").val(r.val()),""==jQuery(".spb_edit_form_elements .custom-margin-top").val()&&jQuery(".spb_edit_form_elements .custom-margin-top").val(r.val()))}e(".spb-colorpicker").minicolors(),e(".noUiSlider").length>0&&e(".noUiSlider").each(function(){var t=e(this),a=t.next("input.spb-uislider"),s=parseInt(a.val(),10),l=parseFloat(a.data("step")),n=parseFloat(a.data("min")),i=parseFloat(a.data("max"));t.noUiSlider({range:{min:n,max:i},start:[s],handles:1,step:l,format:wNumb({decimals:0,thousand:"",postfix:""})}),t.Link("lower").to(a)}),e(".spb-buttonset").length>0&&e(".spb-buttonset").each(function(){var t=e(this);t.find(".buttonset-item,.ui-button").button(),t.buttonset()}),e(".icon-picker").length>0&&e(".icon-picker").each(function(){e(this).val(),e(this).parent().find(".font-icon-grid")}),e(".font-icon-grid.std-grid").on("click","li",function(){var t=e(this),a="";""===(a=t.hasClass("svg-icon")?t.data("path"):t.find("i").attr("class"))&&(a=t.find("i").attr("class")),a||(a=t.data("icon")),e(".font-icon-grid li").removeClass("selected"),t.addClass("selected"),t.parent().parent().find("input").val(a),t.parent().parent().find("input").not(".search-icon-grid").val(a)}),e(document).on("click",".section_add_icon",function(){jQuery(this).parent().parent().find(".font-icon-grid").show()}),e(document).on("click",".section_icon_image",function(){jQuery(this).parent().parent().find(".font-icon-grid").show()}),e(document).on("click",".font-icon-grid.repeater-grid li",function(){var t=e(this),a="";""===(a=t.hasClass("svg-icon")?t.data("path"):t.find("i").attr("class"))&&(a=t.find("i").attr("class")),""===a&&(a=t.find("i").data("icon")),t.parent().parent().find(".icon_field_value").val(a);var s=jQuery(this).find("i").clone();t.parent().parent().find(".section_icon_image").html(s),t.parent().parent().find(".section_icon_image > i").attr("data-path",a),jQuery(this).parent().hide(),t.parent().parent().find(".section_icon_image").show()});var d,p,c,_,u,m,b,h=t.children(".spb_edit_callback");if(1==h.length)window[h.attr("value")];return e(".spb_save_edit_form").unbind("click").click(function(e){e.preventDefault(),removeClassProcessedElements(),saveFormEditing(t)}),e("#cancel-background-options").unbind("click").click(function(t){t.preventDefault(),jQuery("body").css("overflow",""),e(".spb_tinymce").each(function(){tinyMCE.majorVersion>=4?tinyMCE.execCommand("mceRemoveEditor",!0,e(this).attr("id")):tinyMCE.execCommand("mceRemoveControl",!0,e(this).attr("id"))}),e("#spb_edit_form").html("").fadeOut(),e("#publish").show()}),jQuery("#spb_edit_form").find(".spb_param_value.caption").parent().parent().hide(),u=e(".spb_edit_wrap"),d=e(".mce-statusbar"),p=e(".mce-edit-area"),_=e(".mce-toolbar-grp"),c=e(".mce-toolbar-grp"),b=!1,!1,(m=function(){var t,a,s,l;l=u.scrollTop()-jQuery("#edit-modal-header").outerHeight(),s=c.offset().top,a=c.outerHeight(),d.offset().top,d.outerHeight(),t=p.offset().top,p.outerHeight(),u.height(),l>=s&&!b?(b=!0,c.css({position:"fixed",top:e(".spb_edit_wrap").offset().top-e(window).scrollTop()})):l<t-a&&b&&(b=!1,_.css({height:"auto"}),c.css({position:"static",top:"auto"}))})(),u.scroll(m)},onDragPlaceholder:function(){return e('<div id="drag_placeholder"></div>')},addLastClass:function(t){var a,s,l;a=0,s=0,(l=e(t)).children(".spb_sortable").removeClass("spb_first spb_last"),l.hasClass("spb_main_sortable")&&(l.find(".spb_sortable .spb_sortable").removeClass("sortable_1st_level"),l.children(".spb_sortable").addClass("sortable_1st_level"),l.children(".spb_sortable:eq(0)").addClass("spb_first"),l.children(".spb_sortable:last").addClass("spb_last")),l.hasClass("spb_column_container")&&(l.children(".spb_sortable:eq(0)").addClass("spb_first"),l.children(".spb_sortable:last").addClass("spb_last")),l.children(".spb_sortable").each(function(){var t=e(this);t.hasClass("span12")||t.hasClass("spb_widget")?s=12:t.hasClass("span10")?s=10:t.hasClass("span9")?s=9:t.hasClass("span8")?s=8:t.hasClass("span6")?s=6:t.hasClass("span4")?s=4:t.hasClass("span3")?s=3:t.hasClass("span2")&&(s=2),(a+=s)>10&&a<=12&&(t.addClass("spb_last"),t.next(".spb_sortable").addClass("spb_first"),a=0),a>12&&(t.addClass("spb_first"),t.prev(".spb_sortable").addClass("spb_last"),a=s),(t.hasClass("spb_column")||t.hasClass("spb_row")||t.hasClass("spb_tabs")||t.hasClass("spb_tour")||t.hasClass("spb_gmaps")||t.hasClass("spb_accordion"))&&(t.find(".spb_element_wrapper .spb_column_container").length>0?(t.removeClass("empty_column"),t.addClass("not_empty_column"),t.find(".spb_element_wrapper .spb_column_container").each(function(){e.swift_page_builder.addLastClass(e(this)),0===e(this).find("div:not(.container-helper)").length?(e(this).addClass("empty_column"),e(this).html(e("#container-helper-block").html())):e(this).find(".container-helper").each(function(){var e=jQuery(this);e.appendTo(e.parent())})})):0===t.find(".spb_element_wrapper .spb_column_container").length?(t.removeClass("not_empty_column"),t.addClass("empty_column")):t.removeClass("empty_column not_empty_column"))})},save_spb_html:function(){this.addLastClass(e(".spb_main_sortable"));var t=generateShortcodesFromHtml(e(".spb_main_sortable"));removeClassProcessedElements(),!0!==isTinyMceActive()?e("#content").val(t):tinyMCE.get("content").setContent(t,{format:"html"})}}}(jQuery),jQuery(document).ready(function(e){if(spb_reorder_saved_templates(),spb_templateSystem(),spb_customElementSystem(),jQuery(document).on("click",".ui-tabs-nav .edit_tab",function(){return showEditSmallForm(jQuery(this)),!1}),jQuery(document).on("change","#padding_vertical",function(){jQuery(".spb_edit_form_elements .custom-padding-top").val(jQuery(this).val()),jQuery(".spb_edit_form_elements .custom-padding-bottom").val(jQuery(this).val())}),jQuery(document).on("change","#padding_horizontal",function(){jQuery(".spb_edit_form_elements .custom-padding-left").val(jQuery(this).val()),jQuery(".spb_edit_form_elements .custom-padding-right").val(jQuery(this).val())}),jQuery(document).on("change","#margin_vertical",function(){jQuery(".spb_edit_form_elements .custom-margin-top").val(jQuery(this).val()),jQuery(".spb_edit_form_elements .custom-margin-bottom").val(jQuery(this).val())}),jQuery(document).on("change","#border_size",function(){jQuery(".spb_edit_form_elements .custom-border-top").val(jQuery(this).val()),jQuery(".spb_edit_form_elements .custom-border-bottom").val(jQuery(this).val()),jQuery(".spb_edit_form_elements .custom-border-left").val(jQuery(this).val()),jQuery(".spb_edit_form_elements .custom-border-right").val(jQuery(this).val())}),jQuery(document).on("change","#spb .custom_css_percentage",function(){var e,t;t=(e="checked"==jQuery(this).attr("checked")?"20":"800")*(jQuery("#padding_vertical_val").val()/jQuery("#padding_vertical_val").attr("max")*100)/100,jQuery("#padding_vertical").attr("max",e),jQuery("#padding_vertical_val").attr("max",e),jQuery("#padding_vertical").val(t),jQuery("#padding_vertical_val").val(t),jQuery("#padding_vertical").trigger("change"),t=e*(jQuery("#padding_horizontal_val").val()/jQuery("#padding_horizontal_val").attr("max")*100)/100,jQuery("#padding_horizontal").attr("max",e),jQuery("#padding_horizontal_val").attr("max",e),jQuery("#padding_horizontal").val(t),jQuery("#padding_horizontal_val").val(t),jQuery("#padding_horizontal").trigger("change"),t=e*(jQuery("#margin_vertical_val").val()/jQuery("#margin_vertical_val").attr("max")*100)/100,t=Math.round(t),jQuery("#margin_vertical").attr("max",e),jQuery("#margin_vertical_val").attr("max",e),jQuery("#margin_vertical").val(t),jQuery("#margin_vertical_val").val(t),jQuery("#margin_vertical").trigger("change"),t=e*(jQuery(".custom-padding-bottom").val()/jQuery("#padding_vertical_val").attr("max")*100)/100,jQuery(".custom-padding-bottom").val(Math.round(t)),t=e*(jQuery(".custom-padding-top").val()/jQuery("#padding_vertical_val").attr("max")*100)/100,jQuery(".custom-padding-top").val(Math.round(t)),t=e*(jQuery(".custom-padding-left").val()/jQuery("#padding_horizontal_val").attr("max")*100)/100,jQuery(".custom-padding-left").val(Math.round(t)),t=e*(jQuery(".custom-padding-right").val()/jQuery("#padding_horizontal_val").attr("max")*100)/100,jQuery(".custom-padding-right").val(Math.round(t)),t=e*(jQuery(".custom-margin-bottom").val()/jQuery("#margin_vertical_val").attr("max")*100)/100,jQuery(".custom-margin-bottom").val(Math.round(t)),t=e*(jQuery(".custom-margin-top").val()/jQuery("#margin_vertical_val").attr("max")*100)/100,jQuery(".custom-margin-top").val(Math.round(t))}),jQuery(document).on("change","#spb .simplified_controls",function(){detailedControls(jQuery(this))}),jQuery(document).on("input",".custom-margin",function(){jQuery(".lb_css_field .cm-global").val(jQuery(this).val())}),jQuery(document).on("input",".custom-border",function(){jQuery(".lb_css_field .cb-global").val(jQuery(this).val())}),jQuery(document).on("input",".custom-padding",function(){jQuery(".lb_css_field .cp-global").val(jQuery(this).val())}),jQuery(document).on("click",".ui-tabs-nav .delete_tab",function(e){e.preventDefault();var t=sfTranslatedText.attr("data-spb-delete-tabs-section-q1"),a='<div class="modal_wrapper"><a class="waves-effect waves-light btn modal-trigger" href="#modal-delete"></a><div id="modal-delete-tab" class="modal modal_spb"><div class="modal-content">';return a+="<h4>"+sfTranslatedText.attr("data-spb-delete-tabs-header")+'</h4><div class="row"> <div class="input-field delete-block col s12"><label>'+t+"</label>",a+='</div></div><div class="modal-footer modal-delete-tab"><a href="#!" class=" modal-action spb-modal-close waves-effect modal-ok-button btn-flat">OK</a><a href="#!" class=" modal-action spb-modal-close waves-effect modal-cancel-button btn-flat">Cancel</a></div></div></div></div>',jQuery("#spb").append(a),jQuery("#modal-delete-tab").openModal(),deletedElement=jQuery(this),!1}),jQuery(document).on("click",".tabs_expanded_helper .add_tab, .add-pin-to-map, .add-parallax-layer",function(e){e.preventDefault();var t=jQuery(this).closest(".spb_sortable").hasClass("spb_tour")?"Slide":"Tab",a=jQuery(this).parent().parent().parent().find(".ui-tabs-nav li").length+1,s=jQuery(this).parent().parent().parent().parent().find(".spb_tabs_holder"),l=s.find(".ui-tabs-nav"),n="";return jQuery(this).parent().hide(),jQuery(this).parent().parent().find(".container-helper").show(),jQuery(this).closest(".spb_sortable").hasClass("spb_gmaps")&&(t="Pin",a=jQuery(this).parent().parent().find(".spb_map_pin").length+1),jQuery(this).closest(".spb_sortable").hasClass("spb_multilayer_parallax")&&(t="Layer",a=jQuery(this).parent().parent().find(".spb_multilayer_parallax_layer").length+1),jQuery(this).closest(".spb_sortable").hasClass("spb_tour")?(n="Tour Tab",l.append('<li class="ui-state-default ui-corner-top" role="tab" tabindex="-1" aria-controls="tab-'+a+'" aria-labelledby="ui-id-'+a+'" aria-selected="false" style="top: 0px;"><a href="#tab-'+a+'" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-'+a+'"><span>'+t+" "+a+'</span></a><a class="delete_tab"></a><a class="edit_tab"></a></li>'),s.append('<div id="tab-'+a+'" class="row-fluid spb_column_container spb_sortable_container not-column-inherit ui-sortable ui-droppable ui-tabs-panel ui-widget-content ui-corner-bottom spb-dont-resize" aria-labelledby="ui-id-'+a+'" role="tabpanel" aria-expanded="true" aria-hidden="false"><div data-element_type="spb_text_block" class="spb_text_block spb_content_element spb_sortable span12 spb_first spb_last ui-sortable-helper"><input type="hidden" class="spb_sc_base" name="element_name-spb_text_block" value="spb_text_block"><div class="controls sidebar-name"> <div class="column_size_wrapper"> <a class="column_decrease" href="#" title="Decrease width"></a> <span class="column_size">1/1</span> <a class="column_increase" href="#" title="Increase width"></a> </div><div class="controls_right"> <a class="column_popup" href="#" title="Pop up"></a><a class="column_edit" href="#" title="Edit"><span class="icon-edit"></span></a> <a class="column_clone" href="#" title="Clone"></a> <a class="column_delete" href="#" title="Delete"></a></div></div><div class="spb_element_wrapper clearfix"><input type="hidden" class="spb_param_value title textfield " name="title" value=""><input type="hidden" class="spb_param_value icon textfield " name="icon" value=""><div class="spb_param_value holder content textarea_html " name="content"><p> This is a text block. Click the edit button to change this text. </p></div><input type="hidden" class="spb_param_value pb_margin_bottom dropdown " name="pb_margin_bottom" value="no"><input type="hidden" class="spb_param_value pb_border_bottom dropdown " name="pb_border_bottom" value="no"><input type="hidden" class="spb_param_value el_class textfield " name="el_class" value=""></div> \x3c!-- end .spb_element_wrapper --\x3e</div> \x3c!-- end #element-spb_text_block --\x3e</div>')):jQuery(this).closest(".spb_sortable").hasClass("spb_gmaps")?(n="Map Pin",s=jQuery(this).parent().parent().parent().find(".spb_tabs_holder"),l.append('<li class="ui-state-default ui-corner-top" role="tab" tabindex="-1" aria-controls="tab-'+a+'" aria-labelledby="ui-id-'+a+'" aria-selected="false" style="top: 0px;"><a href="#tab-'+a+'" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-'+a+'"><span>'+t+" "+a+"</span></a></li>"),s.append('<div class="row-fluid spb_column_container map_pin_wrapper not-column-inherit not-sortable"><div data-element_type="spb_map_pin" class="spb_map_pin spb_content_element spb_sortable span12 spb_first spb_last"><input type="hidden" class="spb_sc_base" name="element_name-spb_map_pin" value="spb_map_pin"><div class="spb_element_wrapper  over_element_wrapper"><div class="spb_elem_controls" style="display: none;"><a class="column_delete" href="#" title="Delete"><span class="icon-delete"></span></a><a class="element-save" href="#" title="Save"><span class="icon-save"></span></a><a class="column_clone" href="#" title="Duplicate"><span class="icon-duplicate"></span></a><a class="column_edit" href="#" title="Edit"><span class="icon-edit"></span></a></div><div class="icon_holder"><span class="icon-map"></span></div><div class="el_name_holder" data_default_name="'+n+'">'+n+'</div><div class="el_name_editor"><input name="el_name_editor" id="el_name_editor" type="text" class="validate textfield" value="Map Pin"><a class="el-name-save" href="#" title="Save"><span class="icon-save"></span></a></div><input type="hidden" class="spb_param_value general_tab section_tab " name="general_tab" value=""><input type="hidden" class="spb_param_value element_name textfield " name="element_name" value=""><input type="hidden" class="spb_param_value pin_title textfield " name="pin_title" value="First Pin"><input type="hidden" class="spb_param_value address textfield " name="address" value="Click the edit button to change the map pin details."><input type="hidden" class="spb_param_value pin_latitude textfield " name="pin_latitude" value=""><input type="hidden" class="spb_param_value pin_longitude textfield " name="pin_longitude" value=""><input type="hidden" class="spb_param_value pin_image attach_image " name="pin_image" value=""><input type="hidden" class="spb_param_value pin_link textfield " name="pin_link" value=""><input type="hidden" class="spb_param_value pin_button_text textfield " name="pin_button_text" value=""><div class="spb_param_value holder content textarea_html hide-shortcode" name="content">This is a map pin. Click the edit button to change it.</div></div> \x3c!-- end .spb_element_wrapper --\x3e \x3c!-- end #element-spb_map_pin --\x3e</div></div>')):jQuery(this).closest(".spb_sortable").hasClass("spb_multilayer_parallax")?(n="Multilayer Parallax Layer",l.append('<li class="ui-state-default ui-corner-top" role="tab" tabindex="-1" aria-controls="tab-'+a+'" aria-labelledby="ui-id-'+a+'" aria-selected="false" style="top: 0px;"><a href="#tab-'+a+'" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-'+a+'"><span>'+t+" "+a+"</span></a></li>"),s.append('<div class="row-fluid spb_column_container not-column-inherit not-sortable"><div data-element_type="spb_multilayer_parallax_layer" class="spb_multilayer_parallax_layer spb_content_element spb_sortable span12"><input type="hidden" class="spb_sc_base" name="element_name-spb_multilayer_parallax_layer" value="spb_multilayer_parallax_layer"><div class="controls sidebar-name"><div class="controls_right" style="display: block;"> <a class="column_edit" href="#" title="Edit"><span class="icon-edit"></span></a><a class="column_delete" href="#" title="Delete"><span class="icon-delete"></span></a></div></div><div class="spb_element_wrapper over_element_wrapper"><div class="spb_elem_controls" style="display: none;"><a class="column_delete" href="#" title="Delete"><span class="icon-delete"></span></a><a class="element-save" href="#" title="Save"><span class="icon-save"></span></a><a class="column_clone" href="#" title="Duplicate"><span class="icon-duplicate"></span></a><a class="column_edit" href="#" title="Edit"><span class="icon-edit"></span></a></div><div class="icon_holder"><span class="spb_multilayer_parallax_layer"></span></div><div class="el_name_holder" data_default_name="'+n+'">'+n+'</div><div class="el_name_editor"><input type="hidden" class="spb_param_value layer_title textfield " name="layer_title" value=""><input name="el_name_editor" id="el_name_editor" type="text" class="validate textfield" value="'+n+' "><a class="el-name-save" href="#" title="Save"><span class="icon-save"></span></a></div><input type="hidden" class="spb_param_value general_tab section_tab " name="general_tab" value=""><input type="hidden" class="spb_param_value element_name textfield " name="element_name" value=""><input type="hidden" class="spb_param_value layer_title textfield " name="layer_title" value=""><input type="hidden" class="spb_param_value layer_image attach_image " name="layer_image" value=""><img width="66" height="66" src="'+jQuery(this).closest(".spb_sortable").attr("data-content-url")+'" class="attachment-thumbnail" alt="" title=""><a href="#" class="column_edit_trigger image-exists"><i class="spb-icon-single-image"></i>No image yet! Click here to select it now.</a><input type="hidden" class="spb_param_value layer_type dropdown " name="layer_type" value="original"><input type="hidden" class="spb_param_value layer_bg_pos dropdown " name="layer_bg_pos" value="center_center"><input type="hidden" class="spb_param_value layer_bg_repeat dropdown " name="layer_bg_repeat" value="no-repeat"><input type="hidden" class="spb_param_value layer_depth dropdown " name="layer_depth" value="0.00"><input type="hidden" class="spb_param_value section_misc_options section " name="section_misc_options" value=""><input type="hidden" class="spb_param_value text_layer buttonset " name="text_layer" value="no"><input type="hidden" class="spb_param_value content textarea_html " name="content" value=""></div> \x3c!-- end .spb_element_wrapper --\x3e</div> \x3c!-- end #element-spb_multilayer_parallax_layer --\x3e</div></div>')):(n="Tab",l.append('<li class="ui-state-default ui-corner-top" role="tab" tabindex="-1" aria-controls="tab-'+a+'" aria-labelledby="ui-id-'+a+'" aria-selected="false" style="top: 0px;"><a href="#tab-'+a+'" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-'+a+'"><span>'+t+" "+a+'</span></a><a class="edit_tab"><span class="icon-edit"></span></a></a><a class="delete_tab"><span class="icon-delete"></span></a></li>'),s.append('<div id="tab-'+a+'" class="row-fluid spb_column_container spb_sortable not-column-inherit not-sortable ui-sortable ui-droppable ui-tabs-panel ui-widget-content ui-corner-bottom spb-dont-resize" aria-labelledby="ui-id-'+a+'" role="tabpanel" aria-expanded="false" aria-hidden="true" style="display: none;"><div data-element_type="spb_text_block" class="spb_text_block spb_content_element spb_sortable span12 sortable_1st_level spb_last spb_first"><input type="hidden" class="spb_sc_base" name="element_name-spb_text_block" value="spb_text_block"><div class="spb_element_wrapper clearfix over_element_wrapper"><div class="spb_elem_controls" style="display: none;"><a class="column_delete" href="#" title="Delete"><span class="icon-delete"></span></a><a class="element-save" href="#" title="Save"><span class="icon-save"></span></a><a class="column_clone" href="#" title="Duplicate"><span class="icon-duplicate"></span></a><a class="column_edit" href="#" title="Edit"><span class="icon-edit"></span></a></div><div class="controls sidebar-name"> <div class="column_size_wrapper" style="display: none;"> <a class="column_decrease" href="#" title="Decrease width"></a> <span class="column_size">1/1</span> <a class="column_increase" href="#" title="Increase width"></a> </div><div class="controls_right" style="display: block;"> <a class="element-save" href="#" title="Save"><span class="icon-save"></span></a> <a class="column_edit" href="#" title="Edit"><span class="icon-edit"></span></a> <a class="column_clone" href="#" title="Clone"><span class="icon-duplicate"></span></a> <a class="column_delete" href="#" title="Delete"></a></div></div><div class="spb_elem_handles"><i class="fas fa-chevron-left"></i><i class="fas fa-chevron-right"></i></div><div class="icon_holder"><span class="icon-text-block"></span></div><div class="el_name_holder" data_default_name="Text Block">Text Block</div><div class="el_name_editor"><input name="el_name_editor" id="el_name_editor" type="text" value="Text Block "><a class="el-name-save" href="#" title="Save"><span class="icon-save"></span></a></div><input type="hidden" class="spb_param_value general_tab section_tab " name="general_tab" value=""><input type="hidden" class="spb_param_value element_name textfield " name="element_name" value=""><div class="spb_param_value holder title textfield " name="title"></div><input type="hidden" class="spb_param_value icon textfield " name="icon" value=""><div class="spb_param_value holder content textarea_html " name="content"><p>This is a text block. Click the edit button to change this text.</p></div><input type="hidden" class="spb_param_value tb_animation_options section " name="tb_animation_options" value=""><input type="hidden" class="spb_param_value animation dropdown " name="animation" value="none"><input type="hidden" class="spb_param_value animation_delay textfield " name="animation_delay" value="0"><input type="hidden" class="spb_param_value tb_styling_options section " name="tb_styling_options" value=""><input type="hidden" class="spb_param_value padding_vertical uislider " name="padding_vertical" value="0"><input type="hidden" class="spb_param_value padding_horizontal uislider " name="padding_horizontal" value="0"><input type="hidden" class="spb_param_value form_content textfield " name="form_content" value=""><input type="hidden" class="spb_param_value el_class textfield " name="el_class" value=""></div> \x3c!-- end .spb_element_wrapper --\x3e</div><div class="tabs_expanded_helper"><a href="#" class="add_element"><span class="icon-add"></span>Add Element</a><a href="#" class="add_tab"><span class="icon-add-tab"></span>Add Tab</a></div><div class="container-helper"><a href="#" class="add-element-to-column btn-floating waves-effect waves-light"><span class="icon-add"></span></a></div>')),jQuery(this).closest(".spb_sortable").hasClass("spb_gmaps")||jQuery(this).closest(".spb_sortable").hasClass("spb_multilayer_parallax")||jQuery(this).parent().parent().parent().tabs("refresh"),initDroppable(),save_spb_html(),savePbHistory("",n,"Added"),!1}),jQuery(document).on("click","#dropdown-history li a",function(e){e.preventDefault(),!0!==isTinyMceActive()?jQuery("#content").val(stripslashes(jQuery(this).attr("data-revision-value"))):tinyMCE.activeEditor.setContent(stripslashes(jQuery(this).attr("data-revision-value"))),jQuery("#spb-empty").hide(),spb_shortcodesToBuilder(!0)}),jQuery(document).on("click",".tabs_expanded_helper .add_section",function(e){e.preventDefault();var t=jQuery(this).parent().parent().parent().parent().parent(),a=t.find(".group").length+1,s='<div class="group"><h3 class="ui-accordion-header ui-state-default ui-corner-all  ui-sortable-handle" role="tab" id="ui-id-9" aria-controls="ui-id-'+a+'" aria-selected="false" aria-expanded="false" tabindex="-1"><a class="title-text" href="#section-'+a+'" id="section-'+a+'">Section '+a+'</a><a class="delete_tab"><span class="icon-delete"></span></a><a class="edit_tab"><span class="icon-edit"></span></a></h3><div class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content-active" id="ui-id-'+a+'" aria-labelledby="ui-id-'+a+'" role="tabpanel" style="display: block;" aria-hidden="false">';return s+='<div class="row-fluid spb_column_container spb_sortable_container not-column-inherit ui-sortable ui-droppable"><div data-element_type="spb_text_block"class="spb_text_block spb_content_element spb_sortable span12 ui-resizable ui-sortable-handle  spb_first spb_last"><input type="hidden" class="spb_sc_base" name="element_name-spb_text_block" value="spb_text_block"><div class="spb_element_wrapper clearfix over_element_wrapper"><div class="spb_elem_controls" style="display: none;"><a class="column_delete" href="#" title="Delete"><span class="icon-delete"></span></a><a class="element-save" href="#" title="Save"><span class="icon-save"></span></a><a class="column_clone" href="#" title="Duplicate"><span class="icon-duplicate"></span></a><a class="column_edit" href="#" title="Edit"><span class="icon-edit"></span></a></div><div class="controls sidebar-name"> <div class="column_size_wrapper" style="display: none;"> <a class="column_decrease" href="#" title="Decrease width"></a> <span class="column_size">1/1</span> <a class="column_increase" href="#" title="Increase width"></a> </div><div class="controls_right" style="display: block;"> <a class="element-save" href="#" title="Save"><span class="icon-save"></span></a> <a class="column_edit" href="#" title="Edit"><span class="icon-edit"></span></a> <a class="column_clone" href="#" title="Clone"><span class="icon-duplicate"></span></a> <a class="column_delete" href="#" title="Delete"></a></div></div><div class="spb_elem_handles"><i class="fas fa-chevron-left"></i><i class="fas fa-chevron-right"></i></div><div class="icon_holder"><span class="icon-text-block"></span></div><div class="el_name_holder" data_default_name="Text Block">Text Block</div><div class="el_name_editor"><input name="el_name_editor" id="el_name_editor" type="text" value="Text Block "><a class="el-name-save" href="#" title="Save"><span class="icon-save"></span></a></div><input type="hidden" class="spb_param_value general_tab section_tab " name="general_tab" value=""><input type="hidden" class="spb_param_value element_name textfield " name="element_name" value=""><div class="spb_param_value holder title textfield " name="title"></div><input type="hidden" class="spb_param_value icon textfield " name="icon" value=""><div class="spb_param_value holder content textarea_html " name="content"><p> This is a text block. Click the edit button to change this text. </p></div><input type="hidden" class="spb_param_value tb_animation_options section " name="tb_animation_options" value=""><input type="hidden" class="spb_param_value animation dropdown" name="animation" value="none"><input type="hidden" class="spb_param_value animation_delay textfield " name="animation_delay" value="0"><input type="hidden" class="spb_param_value tb_styling_options section " name="tb_styling_options" value=""><input type="hidden" class="spb_param_value padding_vertical uislider " name="padding_vertical" value="0"><input type="hidden" class="spb_param_value padding_horizontal uislider " name="padding_horizontal" value="0"><input type="hidden" class="spb_param_value form_content textfield " name="form_content" value=""><input type="hidden" class="spb_param_value el_class textfield " name="el_class" value=""></div> \x3c!-- end .spb_element_wrapper --\x3e</div> \x3c!-- end #element-spb_text_block --\x3e<div class="tabs_expanded_helper" style="display: none;"><a href="#" class="add_element"><span class="icon-add"></span>Add Element</a><a href="#" class="add_section"><span class="icon-add-tab"></span>Add Section</a></div><div class="container-helper ui-sortable-handle" style="display: block;"><a href="#" class="add-element-to-column btn-floating waves-effect waves-light"><span class="icon-add"></span></a></div></div></div></div>',jQuery(this).parent().hide(),jQuery(this).parent().parent().find(".container-helper").show(),t.append(s),t.accordion("destroy").accordion({header:"> div > h3",autoHeight:!0,heightStyle:"content"}).sortable({axis:"y",handle:"h3",stop:function(e,t){t.item.children("h3").triggerHandler("focusout"),save_spb_html()}}),initDroppable(),save_spb_html(),jQuery(this).parent().parent().parent().parent().find(".title-text").click(),savePbHistory("","Accordion Section","Added"),!1}),jQuery(document).on("click",".spb_accordion_holder .delete_tab",function(e){e.preventDefault();var t=sfTranslatedText.attr("data-spb-delete-accordion-section-q1"),a='<div class="modal_wrapper"><a class="waves-effect waves-light btn modal-trigger" href="#modal-delete"></a><div id="modal-delete-section" class="modal modal_spb"><div class="modal-content">';return a+="<h4>"+sfTranslatedText.attr("data-spb-delete-accordion-header")+'</h4><div class="row"> <div class="input-field delete-block col s12"><label>'+t+"</label>",a+='</div></div><div class="modal-footer modal-delete-section"><a href="#!" class=" modal-action spb-modal-close waves-effect modal-ok-button btn-flat">OK</a><a href="#!" class=" modal-action spb-modal-close waves-effect modal-cancel-button btn-flat">Cancel</a></div></div></div></div>',jQuery("#spb").append(a),jQuery("#modal-delete-section").openModal(),deletedElement=jQuery(this),!1}),jQuery(document).on("click",".modal-delete-section .modal-ok-button",function(e){e.preventDefault(),deletedElement.parent().closest(".group").remove(),Materialize.toast(sfTranslatedText.attr("data-spb-deleted-element"),2e3),save_spb_html()}),jQuery(document).on("click",".modal-remove-template .modal-ok-button",function(e){e.preventDefault();var t={action:"spb_delete_template",template_id:deletedElement};jQuery.post(ajaxurl,t,function(e){jQuery(".spb-prebuilt-pages").html(e),spb_reorder_saved_templates(),Materialize.toast(sfTranslatedText.attr("data-spb-deleted-element"),2e3)})}),jQuery(document).on("click",".modal-delete-tab .modal-ok-button",function(e){e.preventDefault();var t=deletedElement.closest("li").index(),a=t+1;if(t<0)return!1;var s=deletedElement.parent().parent().parent(),l=s.find(".ui-tabs-nav li:eq("+t+")").attr("aria-controls");return s.find(".ui-tabs-nav li:eq("+t+")").remove(),s.closest(".spb_sortable").hasClass("spb_tour")?(s.find("#tab-"+a).remove(),s.find("#tab-slide-"+a).remove()):(s.find("#"+l).remove(),s.find("#tab-"+l).remove()),s.tabs("refresh"),save_spb_html(),Materialize.toast(sfTranslatedText.attr("data-spb-deleted-element"),2e3),jQuery(".modal_wrapper").remove(),!1}),jQuery(document).on("click",".input-field label",function(){jQuery(this).prev().hasClass("validate")&&jQuery(this).prev().focus()}),jQuery(".tooltipped").tooltip({delay:0}),jQuery(document).on("click",".right_top_section .icon-delete",function(){jQuery(this).parent().parent().parent().remove()}),jQuery(document).on("click",".pricing_column_holder .icon-delete",function(){jQuery(this).parent().parent().parent().remove()}),jQuery(document).on("click",".spb_add_new_icon_section",function(e){e.preventDefault();var t=jQuery(".section_repeater").size()+1,a="";a+='<li><div class="section_repeater"><div class="left_section"><div class="section_icon_image" style="display:none;"></div><a href="#" class="section_add_icon"><span class="icon-add"></span></a></div><div class="right_section"><div class="right_top_section">',a+='<input name="icon_title_'+t+'" id="icon_title_'+t+'" class="textfield validate active icon_title " placeholder="Icon Box Title" type="text" value="" /><span class="icon-drag-handle"></span><span class="icon-delete"></span></div>',a+='<div class="right_bottom_section"><input name="icon_link_'+t+'" id="icon_link_'+t+'" class="textfield validate active icon_link" placeholder="Icon Box Link" type="text" value="" />',a+='<select id="select_section_'+t+'"  class="icon_target"><option value="_self" selected>'+sfTranslatedText.attr("data-spb-same-window")+'</option><option value="_blank">'+sfTranslatedText.attr("data-spb-new-window")+"</option></select></div>",a+='</div><ul class="font-icon-grid repeater-grid svg-grid">'+jQuery(".section_repeater").find(".font-icon-grid").first().html()+"</ul></div></li>",jQuery(".section_repeater").last().parent().after(a),jQuery(".icon_section_holder").find("select").not(".disabled").material_select()}),jQuery(document).on("click",".spb_add_new_column_feature",function(e){e.preventDefault();var t=jQuery(".section_repeater_features").size()+1,a="";a+='<li><div class="collapsible-header">'+sfTranslatedText.attr("data-spb-feature-name")+'<div class="pricing_col_actions"><span class="icon-drag-handle"></span><span class="icon-delete"></span></div></div><div class="collapsible-body"><div class="section_repeater_features">',a+='<div class="row"><div class="input-field col s12"><input name="plan_feature_name_'+t+'" id="plan_feature_name_'+t+'" class="textfield validate active plan_feature_name" type="text"  value="'+sfTranslatedText.attr("data-spb-feature-name")+'" /><label class="active" for="plan_feature_name_'+t+'">'+sfTranslatedText.attr("data-spb-feature-name")+"</label></div></div>",a+='<div class="row"><div class="input-field col s12"><input name="plan_feature_name_el_class_'+t+'" id="plan_feature_name_el_class_'+t+'" class="textfield validate active feature_el_class" type="text"  value="" /><label for="plan_feature_name_el_class_'+t+'">'+sfTranslatedText.attr("data-spb-extra-class")+"</label></div></div>",a+=" </div></div></li>",jQuery(this).parent().parent().find(".pricing_column_feature_holder").append(a),jQuery(".collapsible").collapsible({accordion:!1})}),jQuery(document).on("click",".spb_add_new_pricing_column",function(e){e.preventDefault();var t=jQuery(".section_repeater").size()+1,a="",s="";s+='<ul class="collapsible pricing_column_feature_holder" data-collapsible="accordion">',s+='<li><div class="collapsible-header">'+sfTranslatedText.attr("data-spb-feature-name")+'<div class="pricing_col_actions"><span class="icon-drag-handle"></span><span class="icon-delete"></span></div></div><div class="collapsible-body"><div class="section_repeater_features">',s+='<div class="row"><div class="input-field col s12"><input name="plan_feature_name_'+t+'_1" id="plan_feature_name_'+t+'_1" class="textfield validate active plan_feature_name" type="text"  value="'+sfTranslatedText.attr("data-spb-feature-name")+'" /><label class="active" for="plan_feature_name_'+t+'_1">'+sfTranslatedText.attr("data-spb-feature-name")+"</label></div></div>",s+='<div class="row"><div class="input-field col s12"><input name="plan_feature_name_el_class_'+t+'_1" id="plan_feature_name_el_class_'+t+'_1" class="textfield validate active feature_el_class" type="text"  value="" /><label class="active" for="plan_feature_name_el_class_'+t+'_1">'+sfTranslatedText.attr("data-spb-extra-class")+"</label></div></div>",s+="</div></div></li></ul>",s+='<div class="bottom_action"><a href="#" class="spb_add_new_column_feature">'+sfTranslatedText.attr("data-spb-add-feature")+"</a></div>",a+='<li><div class="collapsible-header"> '+sfTranslatedText.attr("data-spb-new-plan")+'<div class="pricing_col_actions"><span class="icon-drag-handle"></span><span class="icon-delete"></span></div></div><div class="collapsible-body">',a+='<div class="section_repeater">',a+='<div class="price_column_holder">',a+='<div class="row"><div class="input-field col s12"><input name="plan_name_'+t+'" id="plan_name_'+t+'" class="textfield validate active plan_name" type="text"  value="'+sfTranslatedText.attr("data-spb-new-plan")+'" /><label class="active" for="plan_name_'+t+'">'+sfTranslatedText.attr("data-spb-plan-name")+"</label></div></div>",a+='<div class="row"><div class="input-field col s12 plan_highlight_column"><select id="select_highlight_column_'+t+'" ><option value="no" selected>'+sfTranslatedText.attr("data-spb-no")+'</option><option value="yes">'+sfTranslatedText.attr("data-spb-yes")+'</option></select><label for="select_highlight_column_'+t+'">'+sfTranslatedText.attr("data-spb-highlight-column")+"</label></div></div>",a+='<div class="row"><div class="input-field col s12"><input name="plan_price_'+t+'" id="plan_price_'+t+'" class="textfield validate active plan_price" type="text" value="" /><label for="plan_price_'+t+'">'+sfTranslatedText.attr("data-spb-plan-price")+"</label></div></div>",a+='<div class="row"><div class="input-field col s12"><input name="plan_period_'+t+'" id="plan_period_'+t+'" class="textfield validate active plan_period" type="text" value="" /><label for="plan_period_'+t+'">'+sfTranslatedText.attr("data-spb-plan-period")+"</label></div></div>",a+='<div class="features_row_holder"><label>'+sfTranslatedText.attr("data-spb-features")+"</label>"+s+"</div>",a+='<div class="row"><div class="input-field col s12"><input name="plan_button_text_'+t+'" id="plan_button_text_'+t+'" class="textfield validate active plan_button_text" type="text" value="" /><label for="plan_button_text_'+t+'">'+sfTranslatedText.attr("data-spb-btn-text")+"</label></div></div>",a+='<div class="row"><div class="input-field col s12"><input name="plan_link_url_'+t+'" id="plan_link_url_'+t+'" class="textfield validate active plan_link_url" type="text" value="" /><label for="plan_link_url_'+t+'">'+sfTranslatedText.attr("data-spb-link-url")+"</label></div></div>",a+='<div class="row"><div class="input-field col s12 plan_link_target"> <select id="select_link_target_'+t+'"><option value="_self" selected>'+sfTranslatedText.attr("data-spb-same-window")+'</option><option value="_blank" >'+sfTranslatedText.attr("data-spb-new-window")+'</option></select><label for="select_link_target_'+t+'">'+sfTranslatedText.attr("data-spb-link-target")+"</label></div></div>",a+='<div class="row"><div class="input-field col s12"><input name="plan_extra_class_'+t+'" id="plan_extra_class_'+t+'" class="textfield validate active plan_extra_class" type="text" value="" /><label for="plan_extra_class_'+t+'">'+sfTranslatedText.attr("data-spb-extra-class")+"</label></div></div>",a+="</div></div></div></li>",jQuery(".section_repeater").last().parent().parent().after(a),jQuery(".pricing_column_holder").find("select").not(".disabled").material_select(),jQuery(".collapsible").collapsible({accordion:!1})}),jQuery(document).on("click",".section_repeater input",function(){jQuery(this).focus()}),jQuery(".dropdown-history").dropdown({inDuration:300,outDuration:225,constrain_width:!1,hover:!0,gutter:0,belowOrigin:!0,alignment:"left"}),e(".tooltipped").tooltip({delay:0}),jQuery("body").on("change","#spb_edit_form select, #spb_edit_form radio, #spb_edit_form input[type=checkbox], #spb_edit_form input[type=hidden], .spb-buttonset",function(){if(jQuery(this).hasClass("spb-buttonset")){var e=jQuery(this).parent().find(":radio:checked").data("id");jQuery(this).find(".buttonset").val(e)}check_form_dependency_fields()}),jQuery(document).on("hover",".spb-content-elements li",function(){jQuery(this).addClass("z-depth-4")}),jQuery(document).on("mouseout",".spb-content-elements li",function(){jQuery(this).removeClass("z-depth-4")}),jQuery(document).on("click",".sf-close-delete-file",function(e){return e.preventDefault(),jQuery(this).parent().parent().remove(),jQuery(".sf_gallery_widget_attached_images_ids").val(""),!1}),jQuery("body").append('<div class="spb-modal-tabs"></div>'),jQuery(document).on("change",".range-field .uislider",function(){jQuery("#"+jQuery(this).attr("name")+"_val").val(jQuery(this).val());var e=jQuery(this);parseInt(jQuery(this).val())>parseInt(e.attr("max"))?(e.prev().width("100%"),jQuery(this).val(e.attr("max"))):e.prev().width(jQuery(this).val()/e.attr("max")*100+"%")}),jQuery(document).on("keydown",".uisliderinput",function(e){var t=jQuery(this).parent().prev().find("input");13!=e.which&&13!=e.keyCode||(e.preventDefault(),parseInt(jQuery(this).val())>parseInt(t.attr("max"))?(t.prev().width("100%"),t.val(t.attr("max")),jQuery(this).val(t.attr("max"))):(t.prev().width(jQuery(this).val()/t.attr("max")*100+"%"),jQuery(this).parent().prev().find("input").val(jQuery(this).val())),jQuery(".spb_edit_form_elements .custom-padding-top").val(jQuery("#padding_vertical").val()),jQuery(".spb_edit_form_elements .custom-padding-bottom").val(jQuery("#padding_vertical").val()),jQuery(".spb_edit_form_elements .custom-padding-left").val(jQuery("#padding_horizontal").val()),jQuery(".spb_edit_form_elements .custom-padding-right").val(jQuery("#padding_horizontal").val()),jQuery(".spb_edit_form_elements .custom-margin-top").val(jQuery("#margin_vertical").val()),jQuery(".spb_edit_form_elements .custom-margin-bottom").val(jQuery("#margin_vertical").val()))}),e(document).on("click",".tab_features_row",function(){jQuery(this).addClass("active"),jQuery(this).prev().removeClass("active"),jQuery(this).parent().parent().find(".features_row_holder").show(),jQuery(this).parent().parent().find(".section_repeater").hide()}),e(document).on("click",".tab_price_column",function(){jQuery(this).addClass("active"),jQuery(this).next().removeClass("active"),jQuery(this).parent().parent().find(".features_row_holder").hide(),jQuery(this).parent().parent().find(".section_repeater").show()}),e(document).on("focusin",".uisliderinput",function(e){return e.preventDefault(),e.stopImmediatePropagation(),!1}),e(document).on("mouseover",".spb_accordion",function(){e(this).find(".spb_accordion_controls").fadeIn()}),e(document).on("mouseleave",".spb_accordion",function(){e(this).find(".spb_accordion_controls").fadeOut()}),e(document).on("mouseover",".spb_tabs, .spb_tour, .spb_gmaps, .spb_multilayer_parallax",function(){e(this).find(".spb_tab_controls").fadeIn()}),e(document).on("mouseleave",".spb_tabs, .spb_tour, .spb_gmaps, .spb_multilayer_parallax",function(){e(this).find(".spb_tab_controls").fadeOut()}),e(document).on("mouseover",".spb-content-elements-saved .spb_elements_li",function(){e(this).find(".spb_remove_element").show()}),e(document).on("mouseleave",".spb-content-elements-saved .spb_elements_li",function(){e(this).find(".spb_remove_element").hide()}),e(document).on("mouseenter",".spb_content_element:not(.spb_tabs, .spb_accordion, .spb_gmaps, .spb_multilayer_parallax, .spb_tour)",function(){var t=e(this);return setTimeout(function(){t.is(":hover")&&t.find(".spb_elem_controls").fadeIn(),t.find(".spb_elem_controls").fadeIn()},100),!1}),e(document).on("mouseleave",".spb_content_element",function(t){e(this).find(".spb_elem_controls").hide(),"block"==e(this).find(".el_name_editor").css("display")&&(e(this).find(".el_name_editor").hide(),e(this).find(".el_name_editor").prev().show()),t.stopImmediatePropagation()}),e(document).on("click",".el_name_holder",function(){e(this).parent().find(".spb_elem_controls").fadeOut();var t=e(this).next().find("#el_name_editor").first();e(this).hide(),e(this).next().show(),t.focus()}),e(document).on("click",".el-name-save",function(t){var a;t.preventDefault(),(a=e(this).parent().prev().hasClass("el_name_holder")?e(this).parent():e(this).parent().parent()).prev().html(e(this).prev().val()),a.parent().parent().find(".element_name").first().val(e(this).prev().val()),a.prev().show(),a.hide(),save_spb_html()}),e(document).keypress(function(t){13==t.which&&"el_name_editor"==jQuery(t.target).attr("id")&&(t.preventDefault(),e(".el-name-save").trigger("click"))}),e(document).on("click","#el_name_editor",function(e){e.preventDefault()}),e(document).on("click",".tab_closing",function(){return cleaningAfterClosingElementsModal(),!1}),e(document).on("click","#cancel-small-form-background",function(){return jQuery(".spb-modal-tabs").html(""),jQuery(".spb-modal-tabs").hide(),jQuery("#spb_edit_form").hide(),jQuery("body").css("overflow",""),!1}),e(document).on("click","#save-small-form",function(){return saveSmallFormEditing(),!1}),e(".spb_most_used, .spb_ui_tab, .spb_med_tab, .spb_layout_tab, .spb_misc_tab, .spb_search_tab, .spb_saved_el_tab, .spb_saved_pages_el_tab").on("click",function(){e("#sf_search_elements").val(""),e(".hide-modal_elements").removeClass("hide-modal_elements"),e(".spb_elements_tabs_header").find(".active_tab").removeClass("active_tab"),e(this).addClass("active_tab"),jQuery(this).hasClass("spb_saved_el_tab")||e(".spb-content-elements").show(),jQuery(this).hasClass("spb_med_tab")&&(e(".spb-item-slideout li").css("display","none"),e(".spb_tab_media_nav").parent().css("display","inline-block"),e(".spb-content-elements").fadeIn(300)),jQuery(this).hasClass("spb_search_tab")&&(e(".spb-item-slideout li").css("display","inline-block"),e(".spb-content-elements").fadeIn(300)),jQuery(this).hasClass("spb_saved_pages_el_tab")&&(e(".spb-item-slideout").css("display","none"),e(".spb-prebuilt-pages .spb_template_li").css("display","inline-block"),e(".spb-prebuilt-pages .sf_prebuilt_template").css("display","inline-block"),e(".spb-prebuilt-pages").fadeIn(300)),jQuery(this).hasClass("spb_ui_tab")&&(e(".spb-item-slideout li").css("display","none"),e(".spb_tab_ui_nav").parent().css("display","inline-block"),e(".spb-content-elements-ui").fadeIn(300)),jQuery(this).hasClass("spb_layout_tab")&&(e(".spb-item-slideout li").css("display","none"),e(".spb_tab_layout_nav").parent().css("display","inline-block"),e(".spb-content-elements-layout").fadeIn(300)),jQuery(this).hasClass("spb_saved_el_tab")&&(e(".spb-item-slideout").css("display","none"),e(".spb-item-slideout li").css("display","none"),e(".spb-content-elements").css("display","none"),e(".spb-content-elements-saved .spb_elements_li").css("display","inline-block"),e(".spb-content-elements-saved").fadeIn(300)),jQuery(this).hasClass("spb_misc_tab")&&(e(".spb-item-slideout li").css("display","none"),e(".spb_tab_misc_nav").parent().css("display","inline-block"),e(".spb-content-elements-misc").fadeIn(300)),jQuery(this).hasClass("spb_most_used")&&(e(".spb-content-elements").css("display","none"),e(".spb-item-slideout li").css("display","none"),e(".spb-most-used-elements li").css("display","inline-block"),e(".spb-most-used-elements").fadeIn(300))}),e(document).on("click",".spb_element_section_tab",function(){jQuery(".spb_element_section_tab").removeClass("active_tab"),jQuery(this).addClass("active_tab"),jQuery(".element_tab_content").hide(),jQuery("."+jQuery(this).attr("data-content-name")).show()}),e(document).on("click","#sf_directory_calculate_coordinates",function(e){e.preventDefault(),(new google.maps.Geocoder).geocode({address:jQuery("#sf_directory_address").val()},function(e){jQuery("#sf_directory_lat_coord").val(e[0].geometry.location.lat()),jQuery("#sf_directory_lng_coord").val(e[0].geometry.location.lng())})}),e(document).on("mouseenter",".spb_sortable",function(t){t.preventDefault(),e("body").hasClass("startedDragging")||(e(this).find(".controls_right:first").fadeIn(100),e(this).find(".spb_element_wrapper").addClass("over_element_wrapper"))}),e(document).on("mouseleave",".spb_sortable",function(t){t.preventDefault(),e(this).find(".controls_right:first , .column_size_wrapper:first").hide(),e(".spb_map_pin .controls_right , .spb_map_pin .column_size_wrapper").show(),e(this).removeClass("over_element_wrapper")}),e(document).on("click","#close-fullscreen-preview",function(t){t.preventDefault(),jQuery("body").css("overflow",""),e("#spb_edit_form").html("").fadeOut()}),e("#previewpage-spb").click(function(t){t.preventDefault(),jQuery(".spb_main_sortable > div").length?(jQuery("body").css("overflow","hidden"),jQuery("#spb_edit_form").html('<div class="spb_preview_fmodal"><div class="spb_preview_fmodal_top_bar"><span class="spb_smodal_header_text">Previewing Page</span><a href="#" id="close-fullscreen-preview" style="float:right;color: #FFFEFE;padding: 15px;">Close Preview</a></div><div class="spb_preview_lockdiv"></div><div class="spb_preview_fmodal_content"><div class="spinnerholder"><div class="spinnermessage"><h4>'+jQuery("#spb_loading").val()+'</h4></div><div class="importspinner">  <div class="bounce1"></div> <div class="bounce2"></div> <div class="bounce3"></div> </div></div></div></div>').show().css({"padding-top":60}),jQuery(".spb_preview_fmodal_content").load(e("#post-preview").attr("href"))):alert("Please add some content before previewing the page.")}),e(document).on("click","#sf_search_elements",function(){e(".spb_search_tab").trigger("click")}),e(document).on("input","#sf_search_saved_elements",function(){var t,a=!1;if(t=e(".page_builder_saved_elements .spb_saved_el_tab").hasClass("active_tab")?".spb-content-elements-saved":".spb-prebuilt-pages",e(this).val().length>1){var s=e(this).val(),l=(s=s.toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()})).toLowerCase();e(t+" > li").find("a").each(function(){e(this).html().toLowerCase().indexOf(l)<0?e(this).parent().addClass("hide-modal_elements"):(e(this).parent().removeClass("hide-modal_elements"),a=!0)})}else e(t+" > li").find("a").parent().removeClass("hide-modal_elements");""!==e(this).val()&&a||e(t+" > li").find("a").parent().removeClass("hide-modal_elements")}),e(document).on("input","#sf_search_elements",function(){var t=!1;if(e(this).val().length>1){var a=e(this).val(),s=a=a.toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()});e(".spb-content-elements > li").find("a").each(function(){e(this).html().indexOf(s)<0?e(this).parent().addClass("hide-modal_elements"):(e(this).parent().removeClass("hide-modal_elements"),t=!0,jQuery(".spb-elements-no-results").hide())})}else e(".spb-content-elements > li").find("a").parent().removeClass("hide-modal_elements"),jQuery(".spb-elements-no-results").hide();""!==e(this).val()&&t||(e(".spb-content-elements > li").find("a").parent().removeClass("hide-modal_elements"),jQuery(".spb-elements-no-results").hide()),""!==e(this).val()&&e(this).val().length>=3&&!t&&(e(".spb-content-elements > li").find("a").parent().addClass("hide-modal_elements"),jQuery(".spb-elements-no-results").show())}),e(document).on("input",".asset-auto-complete",function(){var t=!1;if(e(this).val().length>1){var a=e(this).val(),s=a=a.toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()});e(".spb-content-elements > li").find("a").each(function(){e(this).html().indexOf(s)<0?e(this).hide():(e(this).show(),t=!0)})}else e(".spb-content-elements > li").find("a").show();""!==e(this).val()&&t||e(".spb-content-elements > li").find("a").show()}),e(document).on("input",".search-icon-grid",function(){if(e(this).val().length>1){var t=e(this).val(),a=(t=t.toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()})).toLowerCase();e(".font-icon-grid > li").find("span").each(function(){e(this).html().indexOf(a)<0?e(this).parent().hide():(e(this).parent().show(),!0)})}else e(".font-icon-grid > li").show()}),e("#spb .dropable_el, #spb .dropable_column").draggable({helper:function(){return e('<div id="drag_placeholder">'+e(this).html()+"</div>").appendTo("body")},zIndex:999999999999,revert:"invalid",distance:2,start:function(){cleaningAfterClosingElementsModal(),jQuery("body").addClass("startedDragging"),jQuery(".metabox-builder-content").removeClass("empty-builder"),jQuery(".spb-item-slideout").hide(),jQuery(".dropdown-toggle").removeClass("selected"),jQuery(".dropdown").removeClass("open"),e(".main_wrapper").prepend('<div class="newtop_sortable_element spb_first spb_last"><div class="new_element_col1"><div class="new_element_plus_sign">+</div></div><div class="new_element_col2"> <div class="newtop_element_text"> </div></div></div>');var t=0;e(".sortable_1st_level").each(function(){e(this).parent().hasClass("spb_main_sortable")&&e(this).hasClass("spb_last")&&(t++,e(this).after('<div class="new_sortable_element spb_first spb_last" datael-position="'+t+'"><div class="new_element_col1"><div class="new_element_plus_sign">+</div></div><div class="new_element_col2"> <div class="newtop_element_text"> </div></div></div>'))});var a=1;e(".spb_row .spb_column_container").each(function(){jQuery(this).prepend('<div datael-position="1" datael-class="row_top_'+a+'" class="newrowtop_sortable_element spb_first spb_last"><div class="new_element_col1"><div class="new_element_plus_sign">+</div></div><div class="new_element_col2"> <div class="newtop_element_text"></div></div></div>'),jQuery(this).addClass("row_top_"+a),a++}),t=0,e(".spb_row .spb_sortable").each(function(){e(this).parent().hasClass("spb_column_container")&&e(this).hasClass("spb_last")&&(t++,e(this).addClass("spb_row_"+t),e(this).after('<div class="newrow_sortable_element spb_first spb_last" datael-position="'+t+'"><div class="new_element_col1"><div class="new_element_plus_sign">+</div></div><div class="new_element_col2"> <div class="newtop_element_text"> </div></div></div>'))}),initDroppable()},stop:function(){jQuery("body").removeClass("startedDragging"),jQuery(".newtop_sortable_element").remove(),jQuery(".new_sortable_element").remove(),jQuery(".newrowtop_sortable_element").remove(),jQuery(".newrow_sortable_element").remove()}}),initDroppable(),e(".dropdown-toggle").on("click",function(t){if(t.preventDefault(),e(".dropdown-toggle").removeClass("selected"),e(".spb-elements-no-results").hide(),e(this).hasClass("spb_custom_elements")?(e(".page_builder_saved_elements .spb_saved_el_tab").click(),e(".page_builder_saved_elements").show(),e(".spb_elements_tabs_header").show(),e(".page_builder_elements_header").hide(),e("#spb_edit_form").show().css({opacity:.8}),e("body").css({overflow:"hidden"}),e("#spb-option-slideout").fadeIn()):(e(".spb_tab_media_nav").parent().show(),e(" .spb-item-slideout").hide(),e(".page_builder_saved_elements").hide(),e(".page_builder_elements_header").show(),e(".spb_elements_tabs_header").show(),e(".spb_search_tab").addClass("active_tab"),e("#spb_edit_form").show().css({opacity:.8}),e("body").css({overflow:"hidden"}),e("#spb-option-slideout").fadeIn(),e(".spb-content-elements.spb-item-slideout").show(),e(".spb-prebuilt-pages-fullscreen").removeClass("selected"),e(".spb-content-elements").removeClass("selected"),e(".spb-item-slideout").removeClass("selected")),e(this).hasClass("spb_prebuilt_pages")&&e(".spb-prebuilt-pages").hasClass("selected"))e(".spb-item-slideout").removeClass("selected");else if(e(this).hasClass("spb_prebuilt_pages")&&(e(".spb-item-slideout").removeClass("selected"),e("body").hasClass("spb-fullscreen-mode")||(e(".spb-content-elements").removeClass("selected"),e(".spb-content-elements").hide())),e(this).hasClass("spb_content_elements")&&(e(".spb-prebuilt-pages").removeClass("selected"),e(".spb-prebuilt-pages").hide(),e(".spb_columns").parent().removeClass("open")),e(this).hasClass("spb-prebuilt-pages")&&(e(".spb-content-elements").removeClass("selected"),e(".spb-content-elements").hide()),e("#spb-elements").hasClass("subnav-fixed")||e(this).hasClass("spb_templates")||e(this).hasClass("spb_custom_elements")||e(this).hasClass("spb_columns")){if(e(this).parent().hasClass("open"))return void e(this).parent().removeClass("open");e("#spb-elements .dropdown").removeClass("open"),e(this).parent().addClass("open")}else{e(".dropdown").removeClass("open");e("#spb-option-slideout");var a=e(this).attr("data-slideout"),s=e("."+a);if(e(this).hasClass("spb-prebuilt-pages-fullscreen")&&e(".spb-prebuilt-pages-fullscreen"),s.hasClass("selected"))return e(".spb-item-slideout").removeClass("selected"),void e(".spb-prebuilt-pages-fullscreen").removeClass("selected");e(this).addClass("selected")}}),e("#publish").click(function(){e("#spb_content").html("")}),e(".clickable_layout_action").click(function(){e(".dropdown-toggle").removeClass("selected"),e(".dropdown").removeClass("open")}),e("#spb-elements .clickable_action").click(function(t){t.preventDefault(),""===currentAsset&&(currentAsset=e(".main_wrapper")),jQuery(this).hasClass("spb_accordion_nav")&&currentAsset.parents(".spb_tabs").length>0||jQuery(this).hasClass("spb_tabs_nav")&&currentAsset.parents(".spb_accordion").length>0?(currentAsset="",close_elements_dropdown()):(getElementMarkup(currentAsset,e(this),"initDroppable"),currentAsset="",close_elements_dropdown())}),e(".spb-content-elements .clickable_action, .spb-most-used-elements  .clickable_action").click(function(t){var a=jQuery(this);t.preventDefault(),""===currentAsset&&(currentAsset=e(".main_wrapper")),getElementMarkup(currentAsset,e(this),"initDroppable"),currentAsset="",jQuery(".tab_closing .icon-close").trigger("click"),save_spb_html(),setTimeout(function(){savePbHistory(a.attr("data-element"),a.find("p").text(),"Added"),trackMostusedElements(a.attr("data-element"))},2e3)}),e("#spb-elements .clickable_layout_action").click(function(t){t.preventDefault(),getElementMarkup(e(".main_wrapper"),e(this),"initDroppable")}),e(document).on("click",".spb_tabs_holder .add_element, .spb_accordion_holder .add_element",function(t){t.preventDefault(),currentAsset=e(this).parent().parent(),open_elements_dropdown(),e(this).parent().hide(),e(this).parent().parent().find(".container-helper").show()}),e(document).on("click",".add-element-to-column",function(t){t.preventDefault(),e(this).parent().parent().parent().hasClass("spb_tabs_holder")||e(this).parent().parent().parent().hasClass("spb_accordion_helper")?(e(this).parent().fadeOut(),e(this).parent().parent().find(".tabs_expanded_helper").fadeIn()):e(this).parent().parent().parent().parent().parent().hasClass("spb_accordion_holder")?(e(this).parent().hide(),e(this).parent().parent().find(".tabs_expanded_helper").show()):(currentAsset=e(this).parent().parent(),open_elements_dropdown())}),columnControls(),1==e("#spb").length){e("div#postdivrich").before('<p class="page-builder-switch"><a class="spb_switch-to-builder button-primary" style="display:none;" href="#">Use Page Builder</a></p>'),e("#spb").children().first().append('<span class="icon-expand-less pb-main-icon"></span><span class="icon-expand-more pb-main-icon"></span>'),e("#spb h2").first().prepend('<span class="icon-icon-page-builder pb-main-icon"></span>');var t=e("#spb-elements").attr("data-color-scheme");jQuery("body").addClass(t);var a=e("#postdivrich"),s=e("#spb"),l=getURLVars();e(".spb_switch-to-builder").click(function(t){t.preventDefault(),a.is(":visible")?(isTinyMceActive()||void 0!==switchEditors&&e("#content-tmce").get(0).click(),a.hide(),s.show(),e("#spb_status").val("true"),e(this).html("Use Default editor").addClass("default"),spb_shortcodesToBuilder(!1),spb_navOnScroll()):(jQuery.swift_page_builder.save_spb_html(),a.show(),s.hide(),e("#spb_status").val("false"),e(window).trigger("resize"),e(this).html("Use Page Builder").removeClass("default"))}),l.spb_enabled&&"false"===e("#spb_status").val()&&e(".spb_switch-to-builder").trigger("click"),"true"==e("#spb_status").val()&&jQuery("#wp-content-wrap").hasClass("tmce-active")?(a.hide(),s.show(),e(".spb_switch-to-builder").html("Use Default editor").addClass("default")):(a.show(),s.hide(),e(".spb_switch-to-builder").html("Swift Page Builder"),e(".spb_switch-to-builder").show())}var n,i;function r(t){var a=e("."+t),s=a.children("li").get();s.sort(function(t,a){var s=e(t).text().toUpperCase(),l=e(a).text().toUpperCase();return s<l?-1:s>l?1:0}),e.each(s,function(e,t){a.append(t)})}jQuery(window).load(function(){"true"==e("#spb_status").val()&&jQuery("#wp-content-wrap").hasClass("tmce-active")&&(setTimeout(function(){spb_shortcodesToBuilder(!1)},900),spb_navOnScroll())}),jQuery(".toggle_title").on("click",function(){jQuery(this).hasClass("toggle_title_active")?jQuery(this).removeClass("toggle_title_active").next().hide():jQuery(this).addClass("toggle_title_active").next().show()}),e.swift_page_builder.galleryImagesControls(),e("#spb").on("click",".add-text-block-to-content",function(t){t.preventDefault(),e(this).attr("parent-container")?e(this).parent().parent().hasClass("ui-accordion-content")||e(this).parent().parent().hasClass("ui-tabs-panel")?getElementMarkup(e(this).parent().parent(),e("#spb_text_block")):e(this).parent().parent().parent().hasClass("ui-accordion-content")||e(this).parent().parent().parent().hasClass("ui-tabs-panel")?getElementMarkup(e(this).parent().parent(),e("#spb_text_block")):e(this).parent().parent().hasClass("spb_column_container")?getElementMarkup(e(this).parent().parent(),e("#spb_text_block")):getElementMarkup(e(e(this).attr("parent-container")),e("#spb_text_block")):getElementMarkup(e(this).parent().parent().parent(),e("#spb_text_block"))}),n=e(".spb_content_elements").parent().find("ul"),(i=n.children("li").get()).sort(function(t,a){var s=e(t).text().toUpperCase(),l=e(a).text().toUpperCase();return s<l?-1:s>l?1:0}),e.each(i,function(e,t){n.append(t)}),r("spb-content-elements"),r("spb-most-used-elements"),e(".alt_background").on("change",function(){e(".altbg-preview").attr("class","altbg-preview"),e(".altbg-preview").addClass(jQuery(this).val())}),e(document).on("click","#clear-spb",function(e){e.preventDefault(),clear_page_builder_content()}),e(".columns-dropdown").before('<ul class="nav assetsearch" style="display:none;"><input type="text" class="asset-auto-complete" placeholder="Search Element"></ul>'),e(document).on("click","#fullscreen-spb",function(t){t.preventDefault(),e(".spb-item-slideout").hide(),e(".spb-item-slideout").removeClass("selected"),e(".dropdown-toggle").removeClass("selected"),e(".dropdown").removeClass("open"),e("body").addClass("spb-fullscreen-mode"),e(".normalscreen-step1").hide(),e("#spb-empty").addClass("spb-empty-fullscreen"),e(".assetsearch").show(),e(".fullscreen-step1").show(),e(".spb-prebuilt-pages").hide(),e("#spb-option-slideout").addClass("spb-option-slideout-fullscreen-aux"),initDroppable()}),e("#close-fullscreen-spb").on("click",function(t){t.preventDefault(),e("#spb-option-slideout").removeClass("spb-option-slideout-fullscreen-aux"),e(".spb-item-slideout-fullscreen").addClass("spb-item-slideout"),e(".spb-item-slideout").removeClass("spb-item-slideout-fullscreen"),e(".spb-item-slideout").hide(),e(".spb-content-elements > li").find("a").show(),e(".asset-auto-complete").val(""),e(".previewpage-spb").hide(),e(".assetsearch").hide(),e(".fullscreen-step1").hide(),e(".normalscreen-step1").show(),e(".spb-prebuilt-pages-fullscreen").removeClass("selected"),e(".spb-prebuilt-pages-fullscreen").removeClass("open"),e(".spb-item-slideout-fullscreen").hide(),e("body").removeClass("spb-fullscreen-mode"),e("#spb-empty").removeClass("spb-empty-fullscreen"),e(".spb-prebuilt-pages").removeClass("spb-prebuilt-pages-fullscreen"),e(".spb-prebuilt-pages").addClass("spb-item-slideout"),e(".spb_content_elements").show(),e(".spb-item-slideout").hide(),e(".dropdown-toggle").removeClass("selected"),e(".spb_templates").removeClass("open")})});var $win,$nav,navTop,isFixed=0;function spb_navOnScroll(){$win=jQuery(window),$nav=jQuery("#spb-elements"),navTop=jQuery("#spb-elements").is(":visible")?jQuery("#spb-elements").length&&jQuery("#spb-elements").offset().top-28:jQuery("#spb").offset().top-28,isFixed=0,spb_processScroll(),$win.on("scroll",spb_processScroll)}function spb_processScroll(){var e=$win.scrollTop();e>=navTop&&!isFixed?(isFixed=1,$nav.addClass("subnav-fixed")):e<=navTop&&isFixed&&(isFixed=0,$nav.removeClass("subnav-fixed"),jQuery("#spb-elements .dropdown").removeClass("open"))}function check_form_dependency_fields(){jQuery("#spb_edit_form .dependency-field").each(function(){var e,t,a,s=jQuery(this).attr("data-parent-operator"),l=jQuery(this).attr("data-parent-value"),n=0;switch(s){case"=":case"equals":a=jQuery("#spb_edit_form  ."+jQuery(this).attr("data-parent-id")),(a.length>1?a.find("select").val():a.hasClass("buttonset")?"checked"==a.attr("checked")?a.attr("data-value-on"):a.attr("data-value-off"):jQuery("#spb_edit_form  ."+jQuery(this).attr("data-parent-id")).val())==l?jQuery(this).removeClass("hide"):jQuery(this).addClass("hide");break;case"!=":case"not":e=jQuery(this).attr("data-parent-value").split(","),t=jQuery(this),n=0,jQuery.each(e,function(e,s){a=jQuery("#spb_edit_form  ."+t.attr("data-parent-id")),(a.length>1?a.find("select").val():a.hasClass("buttonset")?"checked"==a.attr("checked")?a.attr("data-value-on"):a.attr("data-value-off"):jQuery("#spb_edit_form  ."+jQuery(this).attr("data-parent-id")).val())!=s.trim()&&n++}),n==e.length?jQuery(this).removeClass("hide"):jQuery(this).addClass("hide");break;case"or":e=jQuery(this).attr("data-parent-value").split(","),t=jQuery(this),n=0,jQuery.each(e,function(e,s){a=jQuery("#spb_edit_form  ."+t.attr("data-parent-id")),(a.length>1?a.find("select").val():a.hasClass("buttonset")?"checked"==a.attr("checked")?a.attr("data-value-on"):a.attr("data-value-off"):jQuery("#spb_edit_form  ."+jQuery(this).attr("data-parent-id")).val())!=s.trim()&&n++}),n==e.length?jQuery(this).addClass("hide"):jQuery(this).removeClass("hide")}})}function updateSelectedImagesOrderIds(e){var t=[];jQuery(e).find(".added img").each(function(){t.push(jQuery(this).attr("rel"))}),jQuery(e).parent().prev().prev().val(t.join(","))}function attachedImgSortable(e){jQuery(e).sortable({forcePlaceholderSize:!0,placeholder:"widgets-placeholder",cursor:"move",items:"li",update:function(){updateSelectedImagesOrderIds(e)}})}function spb_shortcodesToBuilder(e){var t,a,s=spb_getContentFromTinyMCE();jQuery.trim(s).length>0&&"["!=jQuery.trim(s).substr(0,1)&&"<span"!=jQuery.trim(s).substr(0,5)&&"<p>"!=jQuery.trim(s).substr(0,3)&&!e&&(alert("By switching to the page builder, any content not in page builder assets will be removed for consistency."),isTinyMceActive()?tinyMCE.get("content").setContent(s):s=jQuery("#content").text(s));var l=jQuery(".spb-svg-loader.clone").html();if(jQuery(".spb_main_sortable").html('<div class="spb-loading-message">'+l+'<div class="loading_text">'+jQuery("#spb_loading").val()+"</div></div>").show().css({"padding-top":60}),e||jQuery(".spb_switch-to-builder").hide(),null!=s&&(t=s.indexOf("<form"),a=s.indexOf("</form>"),t>=0)){a+=7-t;var n=s.substr(t,a).replace(/"/g,"'");s=s.replace(s.substr(t,a),n)}var i={action:"spb_shortcodes_to_builder",content:s};jQuery.post(ajaxurl,i,function(e){jQuery(".spb_main_sortable").html(e),spb_elements_hide_controls(!0),jQuery.swift_page_builder.isMainContainerEmpty(),jQuery(".spb_switch-to-builder").show(),jQuery(".tooltipped").tooltip({delay:50}),jQuery.swift_page_builder.addLastClass(jQuery(".spb_main_sortable")),initDroppable(),jQuery(".spb_main_sortable").find(".spb_init_callback").each(function(){var e=window[jQuery(this).attr("value")];"function"==typeof e&&e(jQuery(this).closest(".spb_sortable"))})})}function spb_getContentFromTinyMCE(){var e="";isTinyMceActive()?null==(e=tinyMCE.get("content").save())&&(e=jQuery("#content").val()):e=jQuery("#content").text();return e}function moved(){var e=jQuery(".spb_sortable"),t=draggedItem.position(),a=t.top,s=t.top+draggedItem.height(),l=t.left,n=t.left+draggedItem.width();e.not(draggedItem).filter(function(){var e=jQuery(this),t=e.position(),i=t.top,r=t.top+e.height(),o=t.left,d=t.left+e.width(),p=i<=s,c=a<=r,_=o<=n,u=l<=d,m=!1,b=!1,h=l-o,v=r-s;return v=Math.abs(v),h<e.width()&&h>0&&(m=!0),v<e.height()&&v>0&&(b=!0),p&&c&&_&&u&&m&&b}).each(function(){jQuery(this).hasClass("spb_first")&&jQuery(this).removeClass("spb_first")})}function spb_load_top_preloader(){jQuery(".page-builder-switch").after('<div class="spb_top_loader">'+jQuery(".spb-svg-loader.clone").html()+"</div>")}function spb_elements_hide_controls(e){e?(jQuery(".controls_right , .column_size_wrapper").hide(),jQuery(".spb_map_pin .controls_right , .spb_map_pin .column_size_wrapper").show()):jQuery(".controls_right , .column_size_wrapper").show(),jQuery(".spb_top_loader").remove()}function startInitDragging(){var e=0;elements_values_array=[],jQuery(".spb_element_wrapper").each(function(){jQuery(this).attr("data-values-id",e),e++,elements_values_array.push(jQuery(this).children('input[type="hidden"]').detach())}),jQuery("body").addClass("startedDragging")}function endInitDragging(){var e=0;jQuery(".spb_element_wrapper").each(function(){e=jQuery(this).attr("data-values-id"),jQuery(this).append(elements_values_array[e])}),save_spb_html(),jQuery("body").addClass("startedDragging")}function initDroppable(){jQuery(".spb_sortable_container:not(.not-sortable)").sortable({opacity:.7,connectWith:".spb_sortable_container",placeholder:"widgets-placeholder",delay:200,refreshPositions:!0,tolerance:"intersect",scrollSensitivity:10,scrollspeed:10,cancel:".spb_map_pin, .spb_elem_handles, .el_name_editor",change:function(e,t){t.placeholder.stop().height(100)},start:function(e,t){if(startInitDragging(),jQuery(".spb_elem_controls").hide(),t.placeholder.css("width",t.item.width()),t.placeholder.height(t.item.height()),t.item.hasClass("spb_row")){var a=t.item.find(".spb_sortable_container");a.parent().hide(),t.item.find(".controls_right, .spb_elem_controls").hide(),t.placeholder.width(t.item.width()-20),t.placeholder.height(100),t.placeholder.addClass("widgets-placeholder"),a.parent().parent().css("height",100),t.item.parent().find(".spb_row").addClass("spb_sortable_container_dragging")}t.item.find(".controls_right, .spb_elem_controls, .spb_tab_controls").hide(),t.item.hasClass("span12")?t.placeholder.css({maxWidth:t.item.width()}):(t.item.hasClass("spb_last")&&(t.placeholder.removeClass("widgets-placeholder"),t.placeholder.addClass("widgets-placeholder-last")),t.placeholder.css({maxWidth:t.item.width()})),jQuery("#spb_content").addClass("sorting-started"),draggedItem=t.item},receive:function(e,t){jQuery(e.target).parent().parent().hasClass("spb_row"),t.item.hasClass("spb_column")&&t.item.parents(".spb_column").length>0&&jQuery(t.sender).sortable("cancel"),t.item.hasClass("spb_row")&&t.item.parents(".spb_row").length>0&&(jQuery(this).sortable("cancel"),jQuery(t.sender).sortable("cancel")),t.item.hasClass("spb_accordion")&&t.item.parents(".spb_tabs").length>0&&jQuery(t.sender).sortable("cancel"),t.item.hasClass("spb_tabs")&&t.item.parents(".spb_accordion").length>0&&jQuery(t.sender).sortable("cancel")},stop:function(e,t){endInitDragging();var a=t.item.find(".spb_sortable_container");jQuery("body").removeClass("startedDragging"),jQuery("#spb_content").removeClass("sorting-started"),jQuery(window).unbind("mousemove",moved),jQuery.swift_page_builder.addLastClass(".spb_main_sortable"),t.item.parent().find(".spb_row").removeClass("spb_sortable_container_dragging"),a.parent().show(),jQuery(".spb_sortable_container_dragging").addClass("spb_sortable_container").removeClass("spb_sortable_container_dragging"),t.item.hasClass("spb_row")&&(a=t.item.find(".spb_sortable_container")).parent().parent().css("height","100%"),jQuery(".newrowbottom_sortable_element").remove()},update:function(){jQuery.swift_page_builder.save_spb_html(),removeClassProcessedElements()},beforeStop:function(e,t){if(t.item.hasClass("not-column-inherit")&&t.placeholder.parent().hasClass("not-column-inherit")&&t.placeholder.parents(".spb_row").length<=0)return!1}}),jQuery(".spb_column_container").sortable({connectWith:".spb_column_container, .spb_main_sortable",forcePlaceholderSize:!0,placeholder:"widgets-placeholder",cursor:"move",items:"div.spb_sortable",cancel:".spb_gmaps, .el_name_editor",refreshPositions:!0,change:function(e,t){},start:function(e,t){startInitDragging(),(t.item.parent().parent().hasClass("spb_tabs_holder")||t.item.parent().parent().parent().parent().hasClass("spb_accordion_holder"))&&t.item.parent().append('<div  class="newrowbottom_sortable_element spb_content_element spb_sortable span12  spb_last spb_first ui-sortable-handle" style="position: relative; opacity: 1; z-index: 0;"></div>'),t.item.closest(".spb_row").find(".spb_element_wrapper").first().find(".spb_column_container").first().append('<div  class="newrowbottom_sortable_element spb_content_element spb_sortable span12  spb_last spb_first ui-sortable-handle" style="position: relative; opacity: 1; z-index: 0;"></div>'),jQuery(".spb_elem_controls").hide(),t.placeholder.css("width",t.item.width()),jQuery(".spb_column_container.ui-droppable").css("min-height","100px"),t.item.hasClass("span12")?t.placeholder.css({maxWidth:t.item.width()}):(t.item.hasClass("spb_last")&&(t.placeholder.removeClass("widgets-placeholder"),t.placeholder.addClass("widgets-placeholder-last")),t.placeholder.css({maxWidth:t.item.width()}))},stop:function(){endInitDragging(),jQuery(".newrowbottom_sortable_element").remove(),jQuery("body").removeClass("startedDragging"),jQuery.swift_page_builder.save_spb_html(),jQuery(".spb_column_container.ui-droppable").css("min-height",0)}}),jQuery(".spb_main_sortable").droppable({greedy:!0,accept:".dropable_el, .dropable_column",drop:function(e,t){getElementMarkup(jQuery(this),t.draggable,"addLastClass"),jQuery("body").removeClass("startedDragging")}}),jQuery(".spb_row").droppable({greedy:!0,accept:function(e){return!(e.hasClass("spb_row")||e.hasClass("dropable_el")&&jQuery(this).hasClass("ui-droppable")&&e.hasClass("not_dropable_in_third_level_nav"))&&(!(!e.hasClass("dropable_el")&&!e.hasClass("dropable_column"))||void 0)},drop:function(e,t){jQuery(this).parent().removeClass("spb_ui-state-active"),getElementMarkup(jQuery(this),t.draggable,"addLastClass"),spb_elements_hide_controls(!1),jQuery(t.item).removeClass("controls_back"),jQuery("body").removeClass("startedDragging")}}),jQuery(".spb_row").sortable({connectWith:".spb_main_sortable",cancel:".spb_row, .el_name_editor",placeholder:"widgets-placeholder",helper:function(){return jQuery('<div id="itemHelper" class="spb_content_element spb_sortable sortable_1st_level span4 spb_first spb_last"><div class="controls sidebar-name"> <div class="column_size_wrapper" style="display: none;"></div></div><div class="spb_element_wrapper"></div></div>').appendTo("body")},cursor:"move",start:function(e,t){t.helper.addClass(t.item.attr("data-element_type")),t.helper.width(230),t.helper.height(104),t.helper.css({minHeight:104}),t.helper.find(".spb_element_wrapper").addClass(t.item.attr("data-element_type")+"_helper"),t.item.hasClass("span12")?t.placeholder.css({maxWidth:t.item.width()}):t.placeholder.css({maxWidth:t.item.width()/100*85}),jQuery("#spb_content").addClass("sorting-started"),jQuery(".spb_row").addClass("sorting-started"),draggedItem=t.item,jQuery("body").addClass("startedDragging")},stop:function(){endInitDragging(),jQuery("#spb_content").removeClass("sorting-started"),jQuery(".spb_row").removeClass("sorting-started"),jQuery.swift_page_builder.addLastClass(".spb_main_sortable"),jQuery("body").removeClass("startedDragging")},items:"div.spb_sortable:not(.spb_row)",update:function(){jQuery.swift_page_builder.save_spb_html(),removeClassProcessedElements()}}),jQuery(".spb_column_container").droppable({greedy:!0,accept:function(e){return!(e.hasClass("spb_accordion_nav")&&jQuery(this).parents(".spb_tabs").length>0)&&(!(e.hasClass("dropable_el")&&jQuery(this).hasClass("ui-droppable")&&e.hasClass("not_dropable_in_third_level_nav"))&&(!0===e.hasClass("dropable_el")||!(jQuery(this).parents(".spb_column").length>0&&e.hasClass("dropable_column"))&&(!!(jQuery(this).parents(".spb_row").length>0&&e.hasClass("dropable_column"))||void 0)))},drop:function(e,t){jQuery(this).parent().removeClass("spb_ui-state-active"),getElementMarkup(jQuery(this),t.draggable,"addLastClass"),spb_elements_hide_controls(!1),jQuery(t.item).removeClass("controls_back"),jQuery("body").removeClass("startedDragging")}}),jQuery(".newtop_sortable_element").droppable({greedy:!0,accept:".dropable_el, .dropable_column, .spb_sortable",hoverClass:"topelementover",zIndex:99999999,drop:function(e,t){return getElementMarkup(jQuery(".main_wrapper"),t.draggable,"topElement"),jQuery(t.item).removeClass("controls_back"),!1}}),jQuery(".new_sortable_element").droppable({greedy:!0,accept:".dropable_el, .dropable_column",hoverClass:"topelementover",zIndex:99999999,drop:function(e,t){jQuery(this).hasClass("new_sortable_element")?getElementMarkup(jQuery(this),t.draggable,"newElementDrop"):getElementMarkup(jQuery(this),t.draggable,"newRowElementDrop"),jQuery(".newtop_sortable_element").remove(),jQuery(".new_sortable_element").remove(),jQuery(".newrowtop_sortable_element").remove(),jQuery(".newrow_sortable_element").remove(),jQuery.swift_page_builder.save_spb_html()}}),jQuery(".spb_sortable").not(".spb_row, .spb_map_pin, .spb_multilayer_parallax_layer, .spb-dont-resize").resizable({helper:"marker",handles:"e",start:function(e,t){jQuery(t.helper).width(t.originalSize.width)},resize:function(e,t){var a,s=t.element.parent().parent().parent(),l=0,n=0,i=0,r=0,o=0,d=jQuery(".metabox-builder-content");s.hasClass("spb_row")&&!s.hasClass("spb_column")?(r=28,o=28,i=38):s.hasClass("spb_column")?(r=25,o=25,d=s,i=50):s.parent().parent().parent().hasClass("spb_accordion")?(r=25,o=25,d=s,i=25):s.hasClass("spb_tabs")||s.hasClass("spb_tour")?(r=40,jQuery(t.helper).height(64)):(s.parent().hasClass("spb_tabs")||s.parent().hasClass("spb_tour"))&&(r=25,d=s,i=0),a=Math.round((d.width()-r)/6),l=parseInt(t.helper.width()/(d.width()-o)*100).toString(),jQuery(this).resizable("option","maxWidth",d.width()-i),jQuery(t.helper).find(".width-helper").remove(),l>=88&&l<=100&&(l="1/1 ",percentageClass="span12",n="12"),l>=70&&l<88&&(l="3/4 ",percentageClass="span9",n="9"),l>=60&&l<70&&(l="2/3 ",percentageClass="span8",n="8"),l>=42&&l<60&&(l="1/2 ",percentageClass="span6",n="6"),l>=29&&l<42&&(l="1/3 ",percentageClass="span4",n="4"),l>=20&&l<29&&(l="1/4 ",percentageClass="span3",n="3"),l<20&&(l="1/6 ",percentageClass="span2",n="2"),t.element.hasClass("spb_column")&&t.element.find(".col_sm").attr("value",n),jQuery(t.helper).append('<div  class="width-helper" style="font-size:25px;width:100%;height:100%;text-align:right;float:right;margin-right:30px;margin-top:20px;"> '+l+" Width </div>"),jQuery(this).resizable("option","minWidth",a)},stop:function(e,t){jQuery("body").removeClass("startedDragging"),t.element.hasClass("spb_text_block")?setTimeout(function(){t.element.css("height",t.element.find(".spb_element_wrapper").height()+30)},50):t.element.hasClass("spb_column")?setTimeout(function(){t.element.css("height","100%")},50):t.element.css("height",t.originalSize.height);var a=jQuery(this).closest(".spb_sortable");jQuery(this).queue(function(){var e=getColumnSize(a);t.element.css({width:""}),save_spb_html(),a.removeClass(e[0]).addClass(percentageClass),save_spb_html(),jQuery(this).dequeue()})}}),jQuery("#spb-option-slideout").draggable({greedy:!0,hoverClass:"",zIndex:99999999}),jQuery(".newrowtop_sortable_element,  .newrow_sortable_element").droppable({greedy:!0,accept:function(e){return!!e.hasClass("dropable_el")||!(jQuery(this).parents(".spb_column").length>0&&e.hasClass("dropable_column"))&&(!!(jQuery(this).parents(".spb_row").length>0&&e.hasClass("dropable_column"))||void 0)},hoverClass:"topelementover",zIndex:99999999,drop:function(e,t){jQuery(this).hasClass("new_sortable_element")?getElementMarkup(jQuery(this),t.draggable,"newElementDrop"):getElementMarkup(jQuery(this),t.draggable,"newRowElementDrop"),jQuery(".newtop_sortable_element").remove(),jQuery(".new_sortable_element").remove(),jQuery(".newrowtop_sortable_element").remove(),jQuery(".newrow_sortable_element").remove(),jQuery.swift_page_builder.save_spb_html()}})}function getElementMarkup(e,t,a){var s={action:"spb_get_element_backend_html",element:t.attr("id"),data_element:t.attr("data-element"),data_width:t.attr("data-width")};spb_load_top_preloader(),jQuery.post(ajaxurl,s,function(t){e.removeClass("empty_column");var s=1;if("topElement"==a)jQuery(e).prepend(t).find(".spb_init_callback").each(function(){var e=window[jQuery(this).attr("value")];"function"==typeof e&&e(jQuery(this).closest(".spb_content_element").removeClass("empty_column"))});else if("newElementDrop"==a)jQuery(".sortable_1st_level").each(function(){jQuery(this).parent().hasClass("spb_main_sortable")&&jQuery(this).hasClass("spb_last")&&(parseInt(jQuery(e).attr("datael-position"))==s&&(jQuery(this).hasClass("spb_row")?jQuery(e).hasClass("newrowtop_sortable_element")?jQuery(this).find(".spb_column_container").prepend(t):jQuery(e).hasClass("new_sortable_element")?jQuery(this).after(t):jQuery(this).find(".spb_column_container").append(t):jQuery(this).after(t),jQuery(".main_wrapper").find(".spb_init_callback").each(function(){var e=window[jQuery(this).attr("value")];"function"==typeof e&&e(jQuery(this).closest(".spb_content_element").removeClass("empty_column"))})),s++)});else if("newRowElementDrop"==a)jQuery(e).hasClass("newrowtop_sortable_element")?jQuery(".spb_row .spb_column_container").each(function(){jQuery(this).hasClass(jQuery(e).attr("datael-class"))&&jQuery(this).prepend(t)}):jQuery(".spb_row").find(".spb_sortable").each(function(){parseInt(jQuery(e).attr("datael-position"))==s&&jQuery(".spb_row_"+s).after(t),s++});else{var l=!0;(e.parent().hasClass("spb_tabs_holder")||e.parent().parent().parent().hasClass("spb_accordion_holder"))&&(t.indexOf("spb_row")>0||t.indexOf("spb_tabs")>0||t.indexOf("spb_accordion")>0)&&(l=!1,Materialize.toast(sfTranslatedText.attr("data-spb-error-row-add"),2e3)),1==l&&(jQuery(e).append(t).find(".spb_init_callback").each(function(){var e=window[jQuery(this).attr("value")];"function"==typeof e&&e(jQuery(this).closest(".spb_content_element").removeClass("empty_column"))}),(e.parent().hasClass("spb_tabs_holder")||e.parent().parent().parent().hasClass("spb_accordion_holder"))&&jQuery(e).find(".container-helper, .tabs_expanded_helper, .ui-resizable-handle").last().detach().appendTo(e))}jQuery.swift_page_builder.isMainContainerEmpty(),jQuery(".spb_sortable").removeClass("spb_row_1"),jQuery(".spb_sortable").removeClass("spb_row_2"),jQuery(".spb_sortable").removeClass("spb_row_3"),jQuery(".spb_sortable").removeClass("spb_row_4"),jQuery(".spb_sortable").removeClass("spb_row_5"),jQuery(".spb_sortable").removeClass("spb_row_6"),jQuery(".spb_sortable").removeClass("spb_row_7"),jQuery(".spb_sortable").removeClass("spb_row_8"),jQuery(".spb_sortable").removeClass("spb_row_9"),jQuery(".spb_sortable").removeClass("spb_row_10"),jQuery(".spb_sortable").removeClass("row_top_1"),jQuery(".spb_sortable").removeClass("row_top_2"),jQuery(".spb_sortable").removeClass("row_top_3"),jQuery(".spb_sortable").removeClass("row_top_4"),jQuery(".spb_sortable").removeClass("row_top_5"),initDroppable(),save_spb_html(),spb_elements_hide_controls(!0)})}function columnControls(){jQuery(document).on("click","#spb .column_delete",function(e){e.preventDefault();var t='<div class="modal_wrapper"><a class="waves-effect waves-light btn modal-trigger" href="#modal-delete">Modal</a><div id="modal1" class="modal modal_spb"><div class="modal-content">';t+="<h4>"+sfTranslatedText.attr("data-spb-delete-element-header")+'</h4><div class="row"> <div class="input-field delete-block col s12"><label>'+sfTranslatedText.attr("data-spb-delete-element-header")+"</label>",t+='</div></div><div class="modal-footer modal-delete-element"><a href="#!" class=" modal-action spb-modal-close waves-effect modal-ok-button btn-flat">OK</a><a href="#!" class=" modal-action spb-modal-close waves-effect modal-cancel-button btn-flat">Cancel</a></div></div></div></div>',jQuery("#spb").append(t),jQuery("#modal1").openModal(),deletedElement=jQuery(this)}),jQuery(document).on("click",".controls_right .column_minimize",function(e){e.preventDefault(),jQuery(this).parent().parent().next().hide(),jQuery(this).next().show(),jQuery(this).hide(),jQuery(this).parent().parent().next().find(".minimize_row").val("yes"),save_spb_html()}),jQuery(document).on("click",".controls_right .column_maximize",function(e){e.preventDefault(),jQuery(this).parent().parent().next().show(),jQuery(this).prev().show(),jQuery(this).hide(),jQuery(this).parent().parent().next().find(".minimize_row").val("no"),save_spb_html()}),jQuery(document).on("click",".controls_right .column_clone, .spb_elem_controls .column_clone, .spb_accordion .column_clone, .spb_tab_controls .column_clone, .row_controls .column_clone",function(e){e.preventDefault();var t=jQuery(this).closest(".spb_sortable"),a=t.clone();a.find(".spb_element_wrapper").removeClass("over_element_wrapper"),a.insertAfter(t).hide().fadeIn(),a.hasClass("spb_tabs")&&a.find(".ui-tabs-nav span").each(function(){updateTabTitleIds(jQuery(this).text())}),a.find(".controls_right , .column_size_wrapper, .spb_elem_controls").hide(),a.find(".ui-resizable-handle").remove(),a.find(".spb_initialized").removeClass("spb_initialized"),a.find(".spb_init_callback").each(function(){var e=window[jQuery(this).attr("value")];"function"==typeof e&&e(a)}),save_spb_html(),initDroppable(),savePbHistory(a.attr("data-element_type"),a.find(".el_name_holder").attr("data_default_name"),"Cloned")}),jQuery(document).on("click",".spb_sortable .spb_sortable .column_popup",function(e){e.preventDefault(),confirm("Press OK to pop (move) section to the top level, Cancel to leave")&&(jQuery(this).closest(".spb_sortable").appendTo(".spb_main_sortable"),initDroppable(),save_spb_html())}),jQuery(document).on("click","#spb .column_edit, #spb .column_edit_trigger",function(e){e.preventDefault(),showEditForm(jQuery(this).closest(".spb_sortable"))}),jQuery(".column_increase").on("click",function(e){e.preventDefault();var t=jQuery(this).closest(".spb_sortable"),a=getColumnSize(t);a[1]&&(t.removeClass(a[0]).addClass(a[1]),a=getColumnSize(t),jQuery(t).find(".column_size:first").html(a[3]),save_spb_html())}),jQuery(".column_decrease").on("click",function(e){e.preventDefault();var t=jQuery(this).closest(".spb_sortable"),a=getColumnSize(t);a[2]&&(t.removeClass(a[0]).addClass(a[2]),a=getColumnSize(t),jQuery(t).find(".column_size:first").html(a[3]),save_spb_html())})}function removeClassProcessedElements(){jQuery(".spb_sortable").removeClass("spb_element_processed")}function showEditSmallForm(e){var t="",a="",s="";if(!jQuery("body").hasClass("edited-form-element")&&(e.parent().addClass("edited-form-element"),e.parent().parent().hasClass("ui-tabs-nav")?(t=e.parent().find("span").text(),a="Tabs",e.parent().attr("data-title-icon")&&(s=e.parent().attr("data-title-icon"))):(t=e.parent().find(".title-text").text(),a="Accordion",e.parent().attr("data-title-icon")&&(s=e.parent().attr("data-title-icon"))),jQuery("body").find("edit-small-modal").length<=0)){var l=jQuery(".spb-svg-loader.clone").html();jQuery("#spb_edit_form").html('<div class="spb-loading-message">'+l+'<div class="loading_text">'+jQuery("#spb_loading").val()+"</div></div>").show().css({"padding-top":60});var n={action:"spb_show_small_edit_form",element_name:a,tab_name:t,icon:s};jQuery.post(ajaxurl,n,function(e){jQuery(".spb-modal-tabs").html(e),jQuery(".spb-modal-tabs").show(),jQuery("#spb_edit_form").html("")})}return!1}function updateTabTitleIds(e){var t,a=e.replace(/[^A-Za-z0-9\-_]/g,"");jQuery('.ui-tabs-nav span:contains("'+e+'")').length>1?jQuery('.ui-tabs-nav span:contains("'+e+'")').each(function(e){t=0===e?jQuery.trim(a):jQuery.trim(a)+"-"+e,jQuery(this).parent().parent().attr("id",t)}):jQuery('.ui-tabs-nav span:contains("'+e+'")').parent().parent().attr("id",a)}function updateAccordionTitleIds(e){var t,a=e.toLowerCase().replace(/[^A-Za-z0-9\-_]/g,"-");jQuery('.ui-accordion-header .title-text:contains("'+e+'")').length>1?jQuery('.ui-accordion-header .title-text:contains("'+e+'")').each(function(e){t=0===e?jQuery.trim(a):jQuery.trim(a)+"-"+e,jQuery(this).parent().attr("accordion_id",t)}):jQuery('.ui-accordion-header .title-text:contains("'+e+'")').parent().attr("accordion_id",a)}function saveSmallFormEditing(){var e=jQuery(".edited-form-element"),t=jQuery(".small_form_title").val();return e.parent().hasClass("ui-tabs-nav")?e.find("span").first().text(t):e.find(".title-text").text(t),e.attr("data-title-icon",jQuery(".small_form_icon").val()),e.hasClass("ui-accordion-header")?updateAccordionTitleIds(t):updateTabTitleIds(t),e.removeClass("edited-form-element"),jQuery(".spb-modal-tabs").html(""),jQuery(".spb-modal-tabs").hide(),jQuery("#spb_edit_form").hide(),jQuery("body").css("overflow",""),Materialize.toast(sfTranslatedText.attr("data-spb-saved-element"),2e3),save_spb_html(),!1}function detailedControls(e){e.is(":checked")?(jQuery(" #spb .css-detailed-controls, .spb_edit_wrap .lb_css_field").hide(),jQuery(" #spb .design_tab .lb_uislider").parent().show(),jQuery("#spb_edit_form .custom-padding-top").val()==jQuery("#spb_edit_form .custom-padding-bottom").val()&&jQuery("#padding_vertical_val").val(Math.round(jQuery("#spb_edit_form .custom-padding-bottom").val())),jQuery("#spb_edit_form .custom-padding-left").val()==jQuery("#spb_edit_form .custom-padding-right").val()&&jQuery("#padding_horizontal_val").val(Math.round(jQuery("#spb_edit_form .custom-padding-left").val())),jQuery("#spb_edit_form .custom-margin-top").val()==jQuery("#spb_edit_form .custom-margin-bottom").val()&&jQuery("#margin_vertical_val").val(Math.round(jQuery("#spb_edit_form .custom-margin-bottom").val())),jQuery("#spb_edit_form .custom_css_percentage").trigger("change")):(jQuery(" #spb .css-detailed-controls, .spb_edit_wrap .lb_css_field").show(),jQuery(" #spb .design_tab .lb_uislider").parent().hide())}function showEditForm(e){var t=generateShortcodesFromHtml(e,!0),a=e.attr("data-element_type");jQuery("body").css("overflow","hidden"),jQuery("#spb_edit_form").css({opacity:1});var s=jQuery(".spb-svg-loader.clone").html();jQuery("#spb_edit_form").html('<div class="spb-loading-message">'+s+'<div class="loading_text">'+jQuery("#spb_loading").val()+"</div></div>").show().css({"padding-top":60});var l={action:"spb_show_edit_form",element:a,shortcode:t};jQuery.post(ajaxurl,l,function(t){var a;jQuery("#spb_edit_form").html(t).css({"padding-top":0,opacity:1}),jQuery.swift_page_builder.initializeFormEditing(e),jQuery(".tooltipped").tooltip({delay:0}),jQuery(".spb_edit_form_elements").resizable({handles:"e",create:function(){jQuery(".ui-resizable-e").css("cursor","ew-resize")}}).draggable({cancel:".spb_edit_wrap",delay:300}),jQuery(".textfield").each(function(){var e=jQuery(this),t=e.next("label");e.val()&&!t.hasClass("active")&&t.addClass("active")}),jQuery("#spb .edit_form_line").find(".simplified_controls").each(function(){detailedControls(jQuery(this))}),jQuery("#spb .edit_form_line").find("select").not(".disabled").material_select(),jQuery(".icon_section_holder, .pricing_column_holder").find("select").not(".disabled").material_select(),jQuery(".collapsible").collapsible({accordion:!1}),check_form_dependency_fields(),jQuery(".icon_section_holder, .pricing_column_holder, .pricing_column_feature_holder").sortable({connectWith:".section_repeater",placeholder:"widgets-placeholder",opacity:.8,tolerance:"intersect",cursor:"move",handle:".icon-drag-handle",cancel:".right_bottom_section",start:function(e,t){t.placeholder.css("opacity","0")},change:function(e,t){t.placeholder.stop().height(24).animate({height:74,duration:"fast",easing:"easeout",opacity:0},200)}}),"spb_text_block"==e.attr("data-element_type")&&(a=e.find(".content").is("[data-form-content]")?e.find(".content").attr("data-form-content"):jQuery(".spb_edit_form_elements .form_content").val(),jQuery(".spb_edit_form_elements #form_content").parent().parent().parent().hide(),void 0!==a&&a.indexOf("</form>")>=0&&tinyMCE.activeEditor.setContent(a)),jQuery("#spb .edit_form_line").find("select").not(".disabled").trigger("contentChanged")})}function saveFormEditing(e){jQuery("#publish").show(),jQuery(".spb_main_sortable, #spb-elements, .spb_switch-to-builder").show(),removeClassProcessedElements();var t=e.find(".el_name_holder").text(),a=e.find(".el_name_holder").first().text();""===t&&(t=e.find(".element_name").val());var s=!!e.hasClass("spb_map_pin");if(e.hasClass("spb_section")&&e.find(".page-name-holder").empty(),"spb_text_block"==e.attr("data-element_type")){var l=tinyMCE.activeEditor.getContent(),n=l.indexOf("<form"),i=l.indexOf("</form>");if(n>=0){i+=7-n;var r=l.substr(n,i).replace(/"/g,"'"),o=l.substr(0,n),d=l.substr(n+i,l.length);l=o+r+d,jQuery(".spb_edit_form_elements .form_content").val(l)}}if(jQuery("#spb_edit_form .spb_param_value").each(function(){var t=jQuery(this).attr("name"),a="",s="";if(jQuery(this).hasClass("icon_section_holder")&&(t="content",jQuery(this).find(".section_repeater").each(function(){var e=jQuery(this).find(".section_icon_image i").attr("class");"svg-icon-picker-item"===e&&(e=jQuery(this).find(".section_icon_image i").data("path"));var t=jQuery(this).find(".icon_title").val(),a=jQuery(this).find(".icon_link").val(),l=jQuery(this).find(".icon_target").val();s+='[spb_icon_box_grid_element title="'+t+'" target="'+l+'" link="'+a+'" icon="'+e+'"][/spb_icon_box_grid_element]'}),a=s),"custom_css"==t){var l,n,i,r,o,d,p,c,_,u,m,b,h,v,f,y,g,j=[];g="checked"==jQuery("#spb_edit_form .custom_css_percentage").attr("checked")?"%":"px",l=jQuery("#spb_edit_form .custom-margin-top").val(),n=jQuery("#spb_edit_form .custom-margin-left").val(),r=jQuery("#spb_edit_form .custom-margin-right").val(),i=jQuery("#spb_edit_form .custom-margin-bottom").val(),_=jQuery("#spb_edit_form .custom-border-top").val(),u=jQuery("#spb_edit_form .custom-border-left").val(),m=jQuery("#spb_edit_form .custom-border-right").val(),b=jQuery("#spb_edit_form .custom-border-bottom").val(),o=jQuery("#spb_edit_form .custom-padding-top").val(),d=jQuery("#spb_edit_form .custom-padding-left").val(),p=jQuery("#spb_edit_form .custom-padding-right").val(),c=jQuery("#spb_edit_form .custom-padding-bottom").val(),v=jQuery("#spb_edit_form .border_color_global").val(),f=jQuery("#spb_edit_form .border_styling_global").find("select").val(),y=jQuery("#spb_edit_form .back_color_global").val(),"default"==f&&(f=""),void 0!==l&&""!=l&&j.push("margin-top: "+l+g+";"),void 0!==n&&""!=n&&j.push("margin-left: "+n+g+";"),void 0!==r&&""!=r&&j.push("margin-right: "+r+g+";"),void 0!==i&&""!=i&&j.push("margin-bottom: "+i+g+";"),void 0!==_&&""!=_&&_>0&&j.push("border-top: "+_+"px "+f+" "+v+";"),void 0!==u&&""!=u&&u>0&&j.push("border-left: "+u+"px "+f+" "+v+";"),void 0!==m&&""!=m&&m>0&&j.push("border-right: "+m+"px "+f+" "+v+";"),void 0!==b&&""!=b&&b>0&&j.push("border-bottom: "+b+"px "+f+" "+v+";"),void 0!==o&&""!=o&&o>0&&j.push("padding-top: "+o+g+";"),void 0!==d&&""!=d&&d>0&&j.push("padding-left: "+d+g+";"),void 0!==p&&""!=p&&p>0&&j.push("padding-right: "+p+g+";"),void 0!==c&&""!=c&&c>0&&j.push("padding-bottom: "+c+g+";"),h=j.join(""),""!=y&&null!=y&&(h+="background-color:"+y+";"),jQuery(this).val(h)}if(jQuery(this).hasClass("pricing_column_holder")){s="";var Q="";t="content",jQuery(this).find(".section_repeater").each(function(){var e=jQuery(this).find(".plan_name").val(),t=jQuery(this).find(".plan_highlight_column").find("select").val(),a=jQuery(this).find(".plan_price").val(),l=jQuery(this).find(".plan_period").val(),n=jQuery(this).find(".plan_button_text").val(),i=jQuery(this).find(".plan_link_url").val(),r=jQuery(this).find(".plan_link_target").find("select").val(),o=jQuery(this).find(".plan_extra_class").val();Q="",jQuery(this).parent().find(".section_repeater_features").each(function(){var e=jQuery(this).find(".plan_feature_name").val(),t=jQuery(this).find(".feature_el_class").val();Q+='[spb_pricing_column_feature feature_name="'+e+'" el_class="'+t+'"] [/spb_pricing_column_feature]'}),s+='[spb_pricing_column name="'+e+'" highlight_column="'+t+'" price="'+a+'"',s+=' period="'+l+'" btn_text="'+n+'" href="'+i+'" target="'+r+'" el_class="'+o+'" ]'+Q+"[/spb_pricing_column]"}),a=s}if("spb_row"!=e.attr("data-element_type")&&"spb_column"!=e.attr("data-element_type")?("element_name"===t&&""!==jQuery(this).val()&&e.find(".el_name_holder").first().html(jQuery(this).val()),"element_name"===t&&""===jQuery(this).val()&&e.find(".el_name_holder").first().html(e.find(".el_name_holder").attr("data_default_name"))):"element_name"===t&&""!==jQuery(this).val()&&e.find(".asset-name").first().html(jQuery(this).val()),jQuery(this).hasClass("textfield")&&(a=jQuery(this).val()),jQuery(this).hasClass("textfield_html"))a=jQuery(this).val(),e.find("[name="+t+"_code]").val(base64_encode(rawurlencode(a))),a=jQuery("<div/>").text(a).html();else if(jQuery(this).hasClass("colorpicker"))a=jQuery(this).val();else if(jQuery(this).hasClass("uislider"))a=jQuery(this).val();else if(jQuery(this).hasClass("icon-picker"))a=jQuery(this).val();else if(jQuery(this).hasClass("buttonset"))a=jQuery(this).val(),console.log(jQuery(this)),console.log(jQuery(this).is(":checked")),a=jQuery(this).is(":checked")?jQuery(this).attr("data-value-on"):jQuery(this).attr("data-value-off");else if(jQuery(this).hasClass("dropdown")||jQuery(this).hasClass("dropdown-id")){if(void 0===t){var w;if(a=jQuery(this).find("select").val(),t=jQuery(this).find("select").attr("name"),jQuery(this).find(".responsive_vis").length>0||jQuery(this).find(".row_responsive_vis").length>0||jQuery(this).find(".col_responsive_vis").length>0)w=e.hasClass("spb_blank_spacer")||e.hasClass("spb_column")?e.find(".responsive-vis-indicator > .icons").first():e.parent().parent().find(".responsive-vis-indicator > .icons").first(),"hidden-lg_hidden-md"===a?w.html('<a href="#" class="tooltipped" data-position="bottom" data-delay="50" data-tooltip="Hidden on Desktop"><i class="icon-vis-desktop hidden_vis"></i><i class="icon-vis-tablet"></i><i class="icon-vis-phone"></i></a>'):"hidden-sm"===a?w.html('<a href="#" class="tooltipped" data-position="bottom" data-delay="50" data-tooltip="Hidden on Tablet"><i class="icon-vis-desktop"></i><i class="icon-vis-tablet hidden_vis"></i><i class="icon-vis-phone"></i></a>'):"hidden-lg_hidden-md_hidden-sm"===a?w.html('<a href="#" class="tooltipped" data-position="bottom" data-delay="50" data-tooltip="Hidden on Desktop + Tablet"><i class="icon-vis-desktop hidden_vis"></i><i class="icon-vis-tablet hidden_vis"></i><i class="icon-vis-phone"></i></a>'):"hidden-lg_hidden-md_hidden-xs"===a?w.html('<a href="#" class="tooltipped" data-position="bottom" data-delay="50" data-tooltip="Hidden on Desktop + Phone"><i class="icon-vis-desktop hidden_vis"></i><i class="icon-vis-tablet"></i><i class="icon-vis-phone hidden_vis"></i></a>'):"hidden-xs_hidden-sm"===a?w.html('<a href="#" class="tooltipped" data-position="bottom" data-delay="50" data-tooltip="Hidden on Tablet + Phone"><i class="icon-vis-desktop"></i><i class="icon-vis-tablet hidden_vis"></i><i class="icon-vis-phone hidden_vis"></i></a>'):"hidden-xs"===a?w.html('<a href="#" class="tooltipped" data-position="bottom" data-delay="50" data-tooltip="Hidden on Phone"><i class="icon-vis-desktop"></i><i class="icon-vis-tablet"></i><i class="icon-vis-phone hidden_vis"></i></a>'):w.html(""),jQuery(".tooltipped").tooltip({delay:50});var C,x=[];jQuery(this).find("option").each(function(){var e=jQuery(this).attr("value");x.push(e)}),C=x.join(" "),e.hasClass("spb_gallery")||e.find(".spb_element_wrapper").removeClass(C).addClass(a)}}else if(jQuery(this).hasClass("select-multiple"))void 0===t&&(t=jQuery(this).find("select").attr("name"),a=jQuery(this).find("input").val());else if(jQuery(this).hasClass("select-multiple-id")){if(void 0===t){var k=jQuery(this).find("select").val();t=jQuery(this).find("select").attr("name")}if(k)a=k.join(",")}else if(jQuery(this).hasClass("textarea_html"))""!==(a=getTinyMceHtml(jQuery(this)))&&jQuery(this).hasClass("content")&&jQuery(this).closest(".spb_edit_wrap").find(".layer_image").length>0&&(e.find(".column_edit_trigger").addClass("hide-layer-image"),e.find(".attachment-medium").addClass("hide-layer-img")),""===a&&jQuery(this).hasClass("content")&&jQuery(this).closest(".spb_edit_wrap").find(".layer_image").length>0&&(e.find(".column_edit_trigger").removeClass("hide-layer-image"),e.find(".attachment-medium").removeClass("hide-layer-img"));else if(jQuery(this).hasClass("spb-checkboxes")){var T=[];jQuery(this).closest(".edit_form_line").find("input").each(function(){var e=jQuery(this);t=e.attr("name"),e.is(":checked")&&T.push(e.attr("id"))}),T.length>0&&(a=T.join(","))}else if(jQuery(this).hasClass("exploded_textarea"))a=jQuery(this).val().replace(/\n/g,",");else if(jQuery(this).hasClass("textarea"))a=jQuery(this).val();else if(jQuery(this).hasClass("textarea_encoded"))a=base64_encode(rawurlencode(jQuery(this).val())),e.find("[name="+t+"_code]").val(a),a=jQuery("<div/>").text(a).html();else if(jQuery(this).hasClass("textarea_raw_html"))a=jQuery(this).val(),e.find("[name="+t+"_code]").val(base64_encode(rawurlencode(a))),a=jQuery("<div/>").text(a).html();else if(jQuery(this).hasClass("attach_images"))a=jQuery(this).val();else if(jQuery(this).hasClass("attach_image")){var E;a=jQuery(this).val(),(E=e.find("[name="+t+"]").next(".attachment-thumbnail")).attr("src",jQuery(this).parent().find("li.added img").attr("src")),E.attr("srcset",""),""!==a?(E.next().addClass("image-exists"),E.show()):(E.next().removeClass("image-exists"),E.hide())}t=t.replace("spb_tinymce_",""),e.find("."+t).not(".spb_element_wrapper").is("div, h1,h2,h3,h4,h5,h6, span, i, b, strong, button")?(e.find("[name="+t+"]").html(a),a.indexOf("</form>")>=0?e.find("[name="+t+"]").attr("data-form-content",a):e.find("[name="+t+"]").is("[data-form-content]")&&e.find("[name="+t+"]").removeAttr("data-form-content")):(e.hasClass("spb_row"),e.find("[name="+t+"]").last().val(a))}),s){var p=e.find("[name=address]").val(),c=e.find("[name=pin_title]").val(),_=e.find("[name=pin_latitude]"),u=e.find("[name=pin_longitude]");if(""!==p)(new google.maps.Geocoder).geocode({address:p},function(e){_.val(e[0].geometry.location.lat()),u.val(e[0].geometry.location.lng())});else e.find("[name=address]").val(jQuery("[name=address]").attr("data-previous-text"));c&&""!==c||(c=(c=p).length>15?c.substring(0,12)+"...":c),jQuery("#"+jQuery(e).parent().attr("aria-labelledby")).find("span").html(c)}var m=e.children(".spb_save_callback");if(1==m.length)window[m.attr("value")];save_spb_html(),savePbHistory(e.attr("data-element_type"),a,"Edited"),jQuery("#spb_edit_form").html("").hide(),jQuery("body").css("overflow","")}function getTinyMceHtml(e){var t,a=e.attr("id");window.switchEditors.go(a,"tmce");try{t=tinyMCE.get(a).getContent(),tinyMCE.majorVersion>=4?tinyMCE.execCommand("mceRemoveEditor",!0,a):tinyMCE.execCommand("mceRemoveControl",!0,a)}catch(a){t=switchEditors.wpautop(e.val())}return t}function initTinyMce(e){var t=e.attr("id"),a=e.closest("#spb .edit_form_line").find(".spb-textarea.textarea_html");window.tinyMCEPreInit.mceInit[t]=_.extend({},tinyMCEPreInit.mceInit.content,{resize:"vertical",height:200}),_.isUndefined(tinyMCEPreInit.qtInit[t])&&(window.tinyMCEPreInit.qtInit[t]=_.extend({},tinyMCEPreInit.qtInit.replycontent,{id:t})),e.val(a.val()),quicktags(window.tinyMCEPreInit.qtInit[t]),QTags._buttonsInit(),window.switchEditors.go(t,"tmce"),tinymce.majorVersion>="4"&&tinymce.execCommand("mceAddEditor",!0,t)}function isTinyMceActive(){return"undefined"!=typeof tinyMCE&&tinyMCE.activeEditor&&!tinyMCE.activeEditor.isHidden()}function getColumnSize(e){return e.hasClass("span12")?new Array("span12","span12","span9","1/1"):e.hasClass("span9")?new Array("span9","span12","span8","3/4"):e.hasClass("span8")?new Array("span8","span9","span6","2/3"):e.hasClass("span6")?new Array("span6","span8","span4","1/2"):e.hasClass("span4")?new Array("span4","span6","span3","1/3"):e.hasClass("span3")?new Array("span3","span4","span2","1/4"):!!e.hasClass("span2")&&new Array("span2","span3","span2","1/6")}function save_spb_html(){jQuery.swift_page_builder.addLastClass(jQuery(".spb_main_sortable"));var e=generateShortcodesFromHtml(jQuery(".spb_main_sortable"));removeClassProcessedElements(),!0!==isTinyMceActive()?jQuery("#content").val(e):tinyMCE.get("content")&&tinyMCE.get("content").setContent(e),jQuery.swift_page_builder.isMainContainerEmpty()}function clear_page_builder_content(){var e='<div class="modal_wrapper"><a class="waves-effect waves-light btn modal-trigger" href="#modal-delete">Modal</a><div id="modal-delete-pb-content" class="modal modal_spb"><div class="modal-content">';e+="<h4>"+sfTranslatedText.attr("data-spb-clear-pb-header")+'</h4><div class="row"> <div class="input-field delete-block col s12"><label>'+sfTranslatedText.attr("data-spb-delete-pb-content-question")+"</label>",e+='</div></div><div class="modal-footer modal-delete-page-builder-content"><a href="#!" class=" modal-action spb-modal-close waves-effect modal-ok-button btn-flat">Yes</a><a href="#!" class=" modal-action spb-modal-close waves-effect modal-cancel-button btn-flat">No</a></div></div></div></div>',jQuery("#spb").append(e),jQuery("#modal-delete-pb-content").openModal()}function generateShortcodesFromHtml(e,t){var a,s="";return(t?jQuery(e):jQuery(e).children(".spb_sortable")).each(function(){var e=jQuery(this),t=e,l=e.find(".spb_sc_base").val(),n=getColumnSize(e),i="",r="]";if(!e.hasClass("spb_element_processed")){if(e.parent().hasClass("spb_column_container")&&e.addClass("spb_element_processed"),e.children(".spb_element_wrapper").children(".spb_param_value").each(function(){var t=jQuery(this).attr("name"),a="",s="";jQuery(this).hasClass("textfield")?s=jQuery(this).is("div, h1,h2,h3,h4,h5,h6, span, i, b, strong")?jQuery(this).html():jQuery(this).is("button")?jQuery(this).text():jQuery(this).val():jQuery(this).hasClass("textfield_html")?s=jQuery(this).val():jQuery(this).hasClass("colorpicker")?s=jQuery(this).val():jQuery(this).hasClass("uislider")?s=jQuery(this).val():jQuery(this).hasClass("buttonset")?s=jQuery(this).val():jQuery(this).hasClass("icon-picker")?s=jQuery(this).val():jQuery(this).hasClass("dropdown")?s=jQuery(this).val():jQuery(this).hasClass("dropdown-id")?s=jQuery(this).val():jQuery(this).hasClass("select-multiple")?s=jQuery(this).val():jQuery(this).hasClass("select-multiple-id")?s=jQuery(this).val():jQuery(this).hasClass("textarea_encoded")?s=jQuery(this).val():jQuery(this).hasClass("textarea_raw_html")&&0===e.children(".spb_sortable").length?(a=jQuery(this).parent().find("."+t+"_code").val(),r="]"+a+"[/"+l+"]"):jQuery(this).hasClass("textarea_html")&&0===e.children(".spb_sortable").length?(a=jQuery(this).html(),r="]"+a+"[/"+l+"]"):jQuery(this).hasClass("posttypes")?s=jQuery(this).val():jQuery(this).hasClass("exploded_textarea")?s=jQuery(this).val():jQuery(this).hasClass("textarea")?s=jQuery(this).is("div, h1,h2,h3,h4,h5,h6, span, i, b, strong")?jQuery(this).html():jQuery(this).val():jQuery(this).hasClass("attach_images")?s=jQuery(this).val():jQuery(this).hasClass("attach_image")?s=jQuery(this).val():jQuery(this).hasClass("widgetised_sidebars")&&(s=jQuery(this).val()),""!==(s=jQuery.trim(s))&&(i+=" "+t+'="'+s+'"')}),i+=' width="'+n[3]+'"',e.hasClass("spb_first")||e.hasClass("spb_last")){var o=e.hasClass("spb_first")?"first":"",d=e.hasClass("spb_last")?"last":"",p=e.hasClass("spb_last")&&e.hasClass("spb_first")?" ":"";i+=' el_position="'+o+p+d+'"'}var c=e.children(".spb_shortcode_callback");if(1==c.length){var _=window[c.attr("value")];"function"==typeof _&&(a=_(e))}if(s+="["+l+i+r+" ",e.children(".spb_element_wrapper").find(".spb_column_container").length>0){c=e.children(".spb_shortcode_callback");var u=0;e.children(".spb_element_wrapper").find(".spb_column_container").each(function(){var e=generateShortcodesFromHtml(jQuery(this));if(1==c.length&&!jQuery(this).hasClass("map_pin_wrapper")){var l=window[c.attr("value")];"function"==typeof l&&(a=l(t,u)),a&&(e=" "+a.replace("%inner_shortcodes",e)+" "),u++}'[spb_accordion_tab title=""]  [/spb_accordion_tab]'!=e.trim()&&'[spb_accordion_tab title="" icon=""]  [/spb_accordion_tab]'!=e.trim()&&'[spb_accordion_tab title=""  accordion_id="" icon=""]  [/spb_accordion_tab]'!=e.trim()||(e=""),s+=e}),s+="[/"+l+"] "}jQuery(".spb_column_container").removeClass("converted")}}),s}function spbTabsInitCallBack(e){e.find(".spb_tabs_holder").not(".spb_initialized").each(function(){var e;jQuery(this).addClass("spb_initialized"),(e=jQuery(this).tabs({panelTemplate:'<div class="row-fluid spb_column_container empty_column spb_sortable_container not-column-inherit">'+jQuery("#container-helper-block").html()+"</div>",add:function(){var e=jQuery(this).tabs("length")-1;jQuery(this).tabs("select",e),save_spb_html()}})).find(".ui-tabs-nav").sortable({axis:"x",tolerance:"pointer",scrollSensitivity:10,scrollspeed:10,helper:"clone",opacity:.9,start:function(e,t){t.placeholder.width(t.item.width()),t.helper.width(t.item.width()+20),t.helper.css({"background-color":"#E7E7E7"})},stop:function(){e.find("ul li").each(function(){var t=jQuery(this).find("a").attr("href").replace("#","");e.find("div.spb_column_container#"+t).appendTo(e)}),save_spb_html()}})}),initDroppable()}function spbTabsGenerateShortcodeCallBack(e,t){var a=e.find(".ui-tabs-nav li:eq("+t+") a").text(),s="",l="";e.find(".ui-tabs-nav li:eq("+t+")").attr("data-title-icon")&&(s=e.find(".ui-tabs-nav li:eq("+t+")").attr("data-title-icon")),e.find(".ui-tabs-nav li:eq("+t+")").attr("id")&&(l=e.find(".ui-tabs-nav li:eq("+t+")").attr("id"));var n='[spb_tab title="'+a+'" icon="'+s+'" id="'+l+'"] %inner_shortcodes [/spb_tab]';return null===t&&(n=""),n}function spbAccordionInitCallBack(e){e.find(".spb_accordion_holder").not(".spb_initialized").each(function(){jQuery(this).addClass("spb_initialized"),jQuery(this).accordion({header:"> div > h3",autoHeight:!0,heightStyle:"content"}).sortable({axis:"y",handle:"h3",stop:function(e,t){t.item.children("h3").triggerHandler("focusout"),save_spb_html()}}),jQuery(document).on("click",".spb_accordion_holder .edit_tab",function(){return showEditSmallForm(jQuery(this)),!1})}),initDroppable()}function spbAccordionGenerateShortcodeCallBack(e,t){var a="",s="",l=e.find(".group:eq("+t+") > h3").text();return e.find(".group:eq("+t+") > h3").attr("data-title-icon")&&(a=e.find(".group:eq("+t+") > h3").attr("data-title-icon")),e.find(".group:eq("+t+") > h3").attr("accordion_id")&&(s=e.find(".group:eq("+t+") > h3").attr("accordion_id")),'[spb_accordion_tab title="'+l+'" accordion_id="'+s+'" icon="'+a+'"] %inner_shortcodes [/spb_accordion_tab]'}function spbMessageInitCallBack(e){var t=e.find(".spb_param_value.color"),a=t.val();t.closest(".spb_element_wrapper").addClass(a)}function spbTextSeparatorInitCallBack(e){var t=e.find(".spb_param_value.title_align"),a=t.val();t.closest(".spb_element_wrapper").addClass(a)}function getURLVars(){for(var e,t=[],a=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),s=0;s<a.length;s++)e=a[s].split("="),t.push(e[0]),t[e[0]]=e[1];return t}function rawurldecode(e){return decodeURIComponent(e+"")}function rawurlencode(e){return e=(e+"").toString(),encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function base64_decode(e){var t,a,s,l,n,i,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=0,d=0,p=[];if(!e)return e;e+="";do{t=(i=r.indexOf(e.charAt(o++))<<18|r.indexOf(e.charAt(o++))<<12|(l=r.indexOf(e.charAt(o++)))<<6|(n=r.indexOf(e.charAt(o++))))>>16&255,a=i>>8&255,s=255&i,p[d++]=64==l?String.fromCharCode(t):64==n?String.fromCharCode(t,a):String.fromCharCode(t,a,s)}while(o<e.length);return utf8_decode(p.join(""))}function base64_encode(e){var t,a,s,l,n,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r=0,o=0,d="",p=[];if(!e)return e;e=utf8_encode(e+"");do{t=(n=e.charCodeAt(r++)<<16|e.charCodeAt(r++)<<8|e.charCodeAt(r++))>>18&63,a=n>>12&63,s=n>>6&63,l=63&n,p[o++]=i.charAt(t)+i.charAt(a)+i.charAt(s)+i.charAt(l)}while(r<e.length);d=p.join("");var c=e.length%3;return(c?d.slice(0,c-3):d)+"===".slice(c||3)}function utf8_decode(e){var t=[],a=0,s=0,l=0,n=0,i=0;for(e+="";a<e.length;)(l=e.charCodeAt(a))<128?(t[s++]=String.fromCharCode(l),a++):l>191&&l<224?(n=e.charCodeAt(a+1),t[s++]=String.fromCharCode((31&l)<<6|63&n),a+=2):(n=e.charCodeAt(a+1),i=e.charCodeAt(a+2),t[s++]=String.fromCharCode((15&l)<<12|(63&n)<<6|63&i),a+=3);return t.join("")}function stripslashes(e){return(e+"").replace(/\\(.?)/g,function(e,t){switch(t){case"\\":return"\\";case"0":return"\0";case"":return"";default:return t}})}function utf8_encode(e){if(null==e)return"";var t,a,s,l=e+"",n="";t=a=0,s=l.length;for(var i=0;i<s;i++){var r=l.charCodeAt(i),o=null;r<128?a++:o=r>127&&r<2048?String.fromCharCode(r>>6|192)+String.fromCharCode(63&r|128):String.fromCharCode(r>>12|224)+String.fromCharCode(r>>6&63|128)+String.fromCharCode(63&r|128),null!==o&&(a>t&&(n+=l.slice(t,a)),n+=o,t=a=i+1)}return a>t&&(n+=l.slice(t,s)),n}